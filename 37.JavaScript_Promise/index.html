<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

  <script>
      var instance = new Promise(function(resolve,reject){
          setTimeout(function(){
              resolve(1)
          },200)  
      })
      instance.then()

      //原生js实现Promise
      //首先_Promise 构造函数会接收一个函数resolver并执行，函数中又包含resolve和reject两个参数，然后_Promise
      //构造函数生成的实例有3种状态，分别是pending(初始值),fullfilled(完成),rejected(失败);且由pending变为成功
      //或者失败后状态不可逆
      function _Promise(resolver){
          this._status = 'pending';
          this._result = '';
          resolver(this.resolve.bind(this),this.reject.bind(this))
      }
      _Promise.prototype.resolve = function(result){
          if(this._status==='pending'){
              this._status = 'fullfilled';
              this._result = result;
          }
      }
      _Promise.prototype.reject = function(result){
          if(this._statuc==='pending'){
              this._status = 'reject';
              this._result = result;
          }
      }
      _Promise.prototype.then = function(isResolve,isReject){
          if(this._status ==='fullfilled'){
              var _isResolve = isResolve(this._result)
              if(_isPromise instanceof _Promise){
                  return _Promise
              }
              return this
          }else if(this._status==='rejected' && arguments[1]){
              var err = new TypeError(this._result)
              var isPromise = isReject(err)
              if(_isPromise instanceof _Promise){
                  return _Promise
              }
              return this
          }
      }
      var instance2 = new _Promise(function(resolve,reject){
        setTimeout(function(){
              resolve(1)
          },200)
      })
      

  </script>  

</body>
</html>