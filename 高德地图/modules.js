_jsload_('mouse', 'g.Hb.wb({xK:"_docMsMov",l8:function(){var a=this.Sa.Rc;g.F.h(a,"mousedown",this.f0,this);this.eja||g.l.cf||(this.yu=g.a.lH(this.yu,150,this),this.lB=g.a.lH(this.lB,150,this),this.eja=!0);this.v2();g.F.h(document,"mousedown",this.k0,this);g.F.h(document,"mouseout",this.yu,this);this.h(this.xK,this.V1,this);g.F.h(a,"mouseover",this.Tka,this);g.F.h(a,"mouseup",this.g0,this);g.F.h(a,"contextmenu",this.wD,this);g.F.h(a,"rightclick",this.wD,this)},uha:function(){g.F.I(document,"mousemove",this.yu,this); g.F.I(this.Sa.Rc,"mousemove",this.lB,this)},v2:function(){g.F.h(document,"mousemove",this.yu,this);g.F.h(this.Sa.Rc,"mousemove",this.lB,this)},Tka:function(){this.tE=!0},k0:function(){this.tE=!1},yu:function(a){if(!this.og&&!this.Og&&this.Sa){var b=this.ji(a,!0,!0);this.q(this.xK,{event:a,qH:b})}},Dba:function(){var a=this.Sa.Rc;g.F.I(a,"mousedown",this.f0,this);g.F.I(document,"mousedown",this.k0,this);g.F.I(document,"mouseout",this.yu,this);this.I(this.xK,this.V1,this);g.F.I(document,"mousemove", this.yu,this);g.F.I(a,"mousemove",this.lB,this);g.F.I(a,"mouseup",this.g0,this);g.F.I(a,"contextmenu",this.wD,this);g.F.I(a,"rightclick",this.wD,this)},n8:function(){g.F.h(this.Sa.Rc,"mousewheel",this.e0,this)},Gba:function(){g.F.I(this.Sa.Rc,"mousewheel",this.e0,this)},m8:function(){this.h("mousemove",this.HW);this.h("mouseout",this.IW);this.h("mouseover",this.JW);this.h("mouseup",this.KW);this.h("mousedown",this.GW);this.h("rightclick",this.MW);this.h("contextmenu",this.xW);this.h("rdblclick",this.NW)}, Fba:function(){this.I("mousemove",this.HW);this.I("mouseout",this.IW);this.I("mouseover",this.JW);this.I("mouseup",this.KW);this.I("mousedown",this.GW);this.I("rightclick",this.MW);this.I("contextmenu",this.xW);this.I("rdblclick",this.NW)},keyboardEnableChanged:function(){this.get("keyboardEnable")?this.j8():this.EL()},scrollWheelChanged:function(){this.get("scrollWheel")?this.h("mousewheel",this.LW):this.I("mousewheel",this.LW)},wD:function(a){g.F.preventDefault(a)},vba:function(a){var b=this.ji(a, !1,!0),c=0;"3D"==this.C.view.type?(this.ka("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&g.a.bi(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c),0==c/120%1&&(c/=2)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/800,a=this.get("zoom")+a,this.kZ(a,b.Ma,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&&g.a.bi(window.opera.version)&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.U.RA=(this.U.RA||0)+c,this.q("mousewheel",b))}, e0:function(a){this.get("scrollWheel")&&this.vba(a)},QO:function(a,b){b=this.ji(a,!1,!0);if(!this.Lx(b.xb,this.U.Tv)){var c=this.U;c.Tv=b.xb;if(c.mq){if(!c.Ld&&(b.xb.x!==c.dm.x||b.xb.y!==c.dm.y)){var d;this.cL(c.Es)&&c.Es.get("draggable")&&(d=c.Es);!d&&this.get("dragEnable")&&(d=this);d&&(c.Ld=!0,c.ap=d,c.Lf=c.dm,c.$o=c.vQ)}c.Ld&&(c.vj=b,b.button=a.buttons||a.button||0,this.XL())}}},QG:function(){var a=this.qH;g.g.$a(this.J,"amap-drag");g.g.cja();g.g.a_();this.U&&(this.U.Ld=!1);this.og&&!this.Og&& this.q("moveend");this.U.yo&&(this.U.yo=!1,this.U.ap.q("dragend",a));this.U.mq=!1;this.U.Tv=null;this.U.Lf=null;g.F.I(document,"mousemove",this.QO,this);g.F.I(document,"mouseup",this.QG,this);try{g.F.I(window.parent.document,"mouseup",this.QG,this)}catch(b){}this.Sa&&(g.F.gsa(this.Sa.Rc),this.v2())},Uka:function(a,b){b=b||this.ji(a,!1,!1,a.srcElement);var c=this.get("size"),d;0<=b.xb.x&&b.xb.x<=c.width&&0<=b.xb.y&&b.xb.y<=c.height&&(d=!0);this.W0&&!d?this.q("mouseout",b):!this.W0&&d&&this.q("mouseover", b);this.W0=d},lB:function(a){if(!this.og&&!this.Og&&this.Sa&&(g.F.preventDefault(a),g.l.mr&&(a=window.event),a)){a=this.ji(a,!1,!1,a.srcElement);var b=this.U,c=a.ud,d;this.U.mq||(c instanceof g.A.Jh?d=c.Ub.get("cursor"):c instanceof g.o.Ec&&(d=c.get("cursor")),d&&c!==this||(d=this.C.He.defaultCursor),d=this.C.get("optimalCursor")||d,this.J.style.cursor=d||"");d=b.Xaa;var e=a.Vs;d!==e&&(d&&b.RV&&b.RV.q("mouseout",a),e&&c&&(c.q("mouseover",a),c.get("topWhenMouseOver")&&(c.Ub.B=!0,c.Ub.setTop(!0),c.Ub.B= !1)));a.ud.q("mousemove",a);a.ud!==this&&this.q("mousemove",a);b.Xaa=a.Vs||null;b.RV=a.ud||null}},f0:function(a){this.tE=!0;g.g.via();g.g.NZ();this.U.Tv=null;this.U.Lf=null;var b=this.ji(a,!0,!1,a.srcElement);this.U.RZ=new Date;this.U.Es=b.ud;this.U.dm=b.xb;this.U.Taa=b.button;this.U.mq=!0;this.U.Uaa=b;this.U.Ld||(this.U.vQ=b);this.oe&&this.oe.stop();var c=b.ud;!c.Ub&&c.get("dragEnable")&&(this.U.mq=!0);g.g.Ra(this.J,"amap-drag");c=!1;b.ud.q("mousedown",b);b.ud!==this&&(this.q("mousedown",b),c=b.ud.get("draggable")); c=c||this.get("dragEnable");g.F.jqa(this.Sa.Rc);g.F.h(document,"mousemove",this.QO,this);g.F.h(document,"mouseup",this.QG,this);try{window.parent.document&&g.l.mr&&g.F.h(window.parent.document,"mouseup",this.QG,this)}catch(d){}g.F.stopPropagation(a);c&&this.uha()},V1:function(a){this.Uka(a.event,a.qH)},Vva:function(a){this.QO(a.event,a.qH)},g0:function(a){this.qH=a=this.ji(a,!1,!1,a.srcElement);var b=a.ud,c=this.C.get("allBubble")||b.get("bubble");b!==document&&(b.q("mouseup",a),a.ud!==this&&c&&this.q("mouseup", a));this.U.dm&&a.xb.x===this.U.dm.x&&a.xb.y===this.U.dm.y&&(this.Cf&&this.Lx(this.U.Qv,a.xb)&&a.button===this.U.Taa?(clearTimeout(this.Cf),this.Cf=null,g.F.b1(a)?c?(b.q("dblclick",a),b!==this&&this.q("dblclick",a)):b.q("dblclick",a):b.q("rdblclick",a),this.U.Qv=null):(g.F.b1(a)?(this.q("clickstart",a),c?(b.q("click",a),b!==this&&this.q("click",a)):(b.q("click",a),this.q("closeOverlays",a)),b.get("topWhenClick")&&(b.Ub.B=!0,b.Ub.setTop(!0),b.Ub.B=!1),this.q("clickend",a)):c?(b.q("rightclick",a),b!== this&&this.q("rightclick",a),this.q("contextmenu",a)):(b.q("rightclick",a),b.q("contextmenu",a)),this.U.Qv=a.xb,this.Cf&&clearTimeout(this.Cf),this.Cf=setTimeout(g.a.bind(function(){clearTimeout(this.Cf);this.Cf=null;this.U.Qv=null},this),260)))}});g.Hb.wb({LW:function(a){this.ka("mousewheel",a);var b=this;if(1<=Math.abs(this.U.RA)&&!this.O5){var c=this.U.RA;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.NE(a.Ma,c);this.U.RA=0;this.O5=!0;setTimeout(function(){b.O5=!1;b.U.RA=0},g.l.zx?50:40)}},HW:function(a){this.ka("mousemove",a)},IW:function(a){this.ka("mouseout",a)},JW:function(a){this.ka("mouseover",a)},KW:function(a){this.ka("mouseup",a)},GW:function(a){this.ka("mousedown",a)},MW:function(a){this.ka("rightclick",a)},xW:function(a){this.ka("contextmenu", a)},NW:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.NE(a.Ma,-1);this.ka("rdblclick",a)}});g.Hb.wb({zaa:function(){this.Iz={left:[37],right:[39],AN:[40],UC:[38],pi:[187,107,61],qi:[189,109,173]};this.W8={left:this.ow(this.LE(100,0)),right:this.ow(this.LE(-100,0)),AN:this.ow(this.LE(0,-100)),UC:this.ow(this.LE(0,100)),pi:this.ow(this.uY(1)),qi:this.ow(this.uY(-1))}},j8:function(){this.get("keyboardEnable")&&(this.Iz||this.zaa(),g.F.h(document,"keydown",this.JE,this),g.F.h(document,"keyup",this.tW,this))},EL:function(){g.F.I(document,"keydown",this.JE,this);g.F.I(document,"keyup",this.tW, this)},tW:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},JE:function(a){var b=a.keyCode,c;for(c in this.Iz)if(this.Iz.hasOwnProperty(c))for(var d=0;d<this.Iz[c].length;d+=1)if(b===this.Iz[c][d]){if(!this.tE)return;if(!a.ctrlKey&&!a.shiftKey){this.W8[c]();g.F.preventDefault(a);return}37===b?(this.bba(),g.F.preventDefault(a)):39===b?(this.Yea(),g.F.preventDefault(a)):38===b?(this.Zda(),g.F.preventDefault(a)):40===b&&(this.Yda(),g.F.preventDefault(a))}},ow:function(a){return function(){a()}}, bba:function(){this.get("rotateEnable")&&(this.q("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},Yea:function(){this.get("rotateEnable")&&(this.q("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},Yda:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},Zda:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},uY:function(a){var b=this.C;return function(){b.B=!0;1===a?b.zoomIn():b.zoomOut(); b.B=!1}},LE:function(a,b){var c=this.C;return function(){c.B=!0;c.panBy(a,b);c.B=!1}}}); ')
_jsload_('vectorlayer', 'g.Ej={g5:function(){0===g.Aa.qe&&g.Ej.n0()},oAa:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Wj===b)return!0},nha:function(a,b){var c="limg-"+a.key+"-"+b.j.hc;g.Aa.ej[c]&&delete g.Aa.ej[c]},u_:function(a){return g.Aa.ej[a.Wj?a.Wj:a]},Un:function(a,b){var c=null,d=null,e=!1,f=g.Aa.ej;a.Wj?(c=a,d=c.Wj,(a=c.url)&&(e=!0)):d=a;var h=f[d];e&&h&&h.src!==a&&(h=f[d]=null);if(!h){var e=function(a){this.RG(a);g.a.bi(b)&&b(!0,{YG:a.target})},k=function(a){this.m0(a);g.a.bi(b)&&b(!1, {YG:a.target})};if(a){var l="data:"===a.substr(0,5),h=document.createElement("img");l||(h.crossOrigin="Anonymous");f[d]=h;h.loaded=!1;g.Aa.qe+=1;g.F.Ij(h,"load",e,this);g.F.Ij(h,"error",k,this);var m=this;h.Vp=g.a.lf();l||void 0!==this.eN||(this.eN=setInterval(function(){if(0===g.Aa.qe||0===g.Aa.Zp.length)clearInterval(m.eN),m.eN=void 0;else{var a=g.a.lf(),b=g.Aa.ej,c=!1,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];!e.loaded&&!e.timeout&&300<=a-e.Vp&&(c=e.timeout=!0)}c&&m.n0()}},100));h.src=a; c&&(h.cva=d)}}},n0:function(){for(var a=0;a<g.Aa.Zp.length;a+=1)g.Aa.Zp[a].set("display")},qZ:function(a){g.F.I(a,"load",this.RG,this);g.F.I(a,"error",this.m0,this)},RG:function(a){a=a.target;a.loaded=!0;g.Aa.qe-=1;this.qZ(a);this.g5()},m0:function(a){a=a.target;a.loaded=!1;g.Aa.qe-=1;this.qZ(a);this.g5()}};g.o.Kh=g.o.Ec.extend({r:function(a,b,c){this.kl=c;g.Aa.Zp.push(this);this.hc=g.a.F_("layer");this.nb=2;a.get("textRatio");this.wS=25;this.W("tiles",a);this.usa=a.get("vdataUrl")||b.C.get("vdataUrl")||g.w.UI;this.di=!0;this.X=a;this.ek=g.l.Y?!1:!0;this.e=b;this.zi=this.yi=!0;this.Ie("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.Ie("zooms detectRetina visible merge sort zIndex textIndex watermark opacity".split(" "),a);this.W("lang", b,!0);this.get("watermark")&&(this.$I=new Image,this.$I.src=this.get("watermark"));this.RI="v4";this.sa={};this.pl={};this.od=256;this.eu=[];this.ef=this.Pf=0;this.ia=g.l.ia&&this.get("detectRetina");this.od=256*(this.ia?2:1);this.W("mapStyle",b);this.W("style",b);this.Xo=0;this.W("features",b);this.Oe=18;this.W("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.ge=!!this.e.get("showBuildingBlock");this.featuresChanged()},featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload"); this.X.Jr()},Afa:function(){var a=!1,b=this.bV();if(b){if(this.wi){var c="active"===this.wi.Cz;b.gz(this.wi);c&&(b.ys(this.wi,"active"),a=!0)}g.l.hha&&!a&&b.jF()}},Yy:function(){this.Afa()},MC:function(a,b){var c=!0;if("hotspotout"===a)this.e.C.set("optimalCursor",null);else if("hotspotover"===a)this.e.C.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.bV();if(d)switch(a){case "hotspotout":d.oF(b);break;case "hotspotover":d.ys(b,"hover");break;case "mouseup":d.ys(b, "hoverup");break;case "mousedown":d.ys(b,"active")}c&&(c=b.ta,c=new g.G(c[0],c[1]),c=this.e.Ee(c,3),this.e.C.q(a,{name:b.name,lnglat:c,id:b.Dr,isIndoorPOI:b.Y0}))},bV:function(){if(!g.l.A0){var a=this.O||this.Rf;if(!a)return null;var b=this.e?this.e.C.get("hotspotOptions"):{},b=g.extend({},b);if(b.disableHighlight)return null;this.lA||(this.lA=new g.o.Kh.f7(a));return this.lA}},pq:function(a){(a=this.N_(a))&&this.MC("hotspotclick",a)},Yv:function(a){var b="mousemove"===a.type;if(!this.e.Og||!b){var c= this.N_(a);c&&c.Dl||(c=null);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.wi!==c&&(this.wi&&this.MC("hotspotout",this.wi),this.MC("hotspotover",c)),!c&&this.wi&&this.MC("hotspotout",this.wi),c&&!b&&this.MC(a.type,c)}this.wi=c}},textIndexChanged:function(){this.set("display")},Ina:function(){this.e.h("click",this.pq,this);this.e.h("mousemove",this.Yv,this);this.e.h("mousedown",this.Yv,this);this.e.h("mouseup",this.Yv,this)},iN:function(){this.e.I("click",this.pq,this);this.e.I("mousemove", this.Yv,this);this.e.I("mousedown",this.Yv,this);this.e.I("mouseup",this.Yv,this)},Kn:function(){return null},xl:function(){var a=this.Ut?null:this.e.C.get("forceZooms");return{di:!0,od:256,visible:this.get("visible"),qd:a||this.get("zooms"),HF:this.ek&&this.La,yi:!this.e.HI,zi:!this.e.HI,opacity:this.get("opacity"),bd:!1,Bd:this.fp()}},vm:function(a){if(g.O.canvas.Kh)return new g.O.canvas.Kh(this,a)},BA:function(a){0===a.indexOf("amap://styles/")&&(a="normal");var b=this.get("forceBig")||g.l.Y&& !this.ia?"6":"5";this.url=g.w.vc+"://"+this.usa+"/tiles?mapType="+a+"&v="+(g.Ce?3:2)+"&style="+b;this.url+=this.ia?"&rd=2":"&rd=1";this.url+="&flds="+this.ga;this.url+="&t="},styleChanged:function(){this.e.Ac||this.featuresChanged()}}); g.o.gd=g.o.Kh.extend({vm:function(a){var b=this;if(!b.$I&&g.l.mf&&"vw"===b.e.get("baseRender")){var c=["wgl"];this.e.Ac&&c.push("wgl2");if(g.pb.AB(c))return new g.O.Lg.gd(b,a)}else if(c=["cgl"],this.e.Ac&&c.push("cgl2"),g.pb.AB(c))return new g.O.canvas.gd(b,a);g.pb.dh(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.kl:a&&(-1!==g.a.indexOf(a,"bg")&&-1!==g.a.indexOf(this.kl,"region")&&b.push("region"),-1!==g.a.indexOf(a,"building")&&-1!== g.a.indexOf(this.kl,"building")&&b.push("building"),-1!==g.a.indexOf(a,"road")&&-1!==g.a.indexOf(this.kl,"road")&&b.push("road"));this.ga=b;this.BA(this.get("mapStyle")||"normal");this.set("reload")}});g.o.r7=g.o.gd.extend({r:function(){this.li(arguments);this.Oe=this.Vn=17;this.ga=["building"];this.ge=!0;this.BA(this.get("mapStyle")||"normal");this.Ut=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); g.o.nj=g.o.Kh.extend({vm:function(a){this.Ag=!0;var b=this;if(this.dP()){if(this.ty=!0,g.O.canvas.BJ)return this.ZY(),a=new g.O.canvas.BJ(this,a),a.h("afterLabelRender",this.Yy,this),a}else{b.ty=!1;if(g.O.canvas.AJ)return a=new g.O.canvas.AJ(this,a),a.h("afterLabelRender",this.Yy,this),a;g.pb.dh(["labelcanvas"],function(){b.set("display")})}},dP:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")?!1:g.l.ty?!0:!1},lla:function(){var a=this.get("mapStyle"); return"normal"!==a&&"amap://styles/normal"!==a||this.e.get("nolimg")||g.l.bd||g.l.Y?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==g.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==g.a.indexOf(a,"point")&&c.push("poilabel"));a=this.dP();c.length&&(a||this.lla())&&c.unshift("limg");this.ga=c;this.BA(b);this.set("reload");(b=this.O||this.Rf)&&a^this.ty&&(this.lA&&(this.lA=this.lA.O=null),b.I("afterLabelRender",this.Yy, this),b.Wq(),this.Rf=this.O=null)},ZY:function(){this.$t=g.w.vc+"://"+(this.X.get("vdataUrl")||this.e.C.get("vdataUrl")||g.w.UI)+"/limg?";var a=this.ia?2:1;this.$t+="&font="+(g.l.Y&&!this.ia?"big":"small");this.$t+="&scl="+a;this.$t+="&t="},N_:function(a){return a.ig?(a=this.A_(this.e.$b(a.ig,20),!0))?a[0]:null:null},A_:function(a,b){var c=this.e.FG();if(c&&(c=c.Jt(this)))return c.$w(a,b)}});g.o.Kh.f7=g.Z.extend({r:function(a){this.gfa(a)},gfa:function(a){this.O=a},oF:function(a){if(a.Cz){a.Cz=!1;var b=this.O;b&&b.oF.apply(b,arguments)}},gz:function(a){a.Cz=!1;var b=this.O;b&&b.gz.apply(b,arguments)},ys:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.Cz!==b){a.Cz=b;var c=this.O;c&&c.ys.apply(c,arguments)}},jF:function(){var a=this.O;a&&a.jF()}});g.o.rv=g.Z.extend({r:function(){this.nb=2;this.wS=g.l.ll?16:12;this.Ypa={road:0,region:0,building:1,poilabel:1,roadlabel:1};this.Gu=[new g.Wf,new g.Wf,new g.Wf,new g.Wf,new g.Wf,new g.Wf,new g.Wf];this.wsa=[{type:"roadlabel",show:!0,ci:1},{type:"poilabel",show:!0,ci:1},null,{type:"region",show:!0,ci:0},{type:"road",show:!0,ci:0},{type:"building",show:!0,ci:0},null];this.Xo=0},Fw:function(a,b,c,d,e){if("first"!==b){c&&(c.zd=d);var f;switch(e){case "roadlabel":f=0;break;case "poilabel":f=1;break;case "labels":f= 2;break;case "region":f=3;break;case "road":f=4;break;case "building":f=5;break;case "allbase":f=6}d=this.Gu[f].dsa;c&&c.pe&&(d=this.Gu[f].push);"groupcomplete"===b?d.call(this.Gu[f],["groupcomplete",f,c,a]):"tileComplete"===b?d.call(this.Gu[f],["co",7,c,a]):(d.call(this.Gu[f],["co",f,c,a]),""!==b&&d.call(this.Gu[f],[b,f,c,a]));this.Xo>f&&(this.Xo=f);this.Qqa()}},J2:function(){var a=new Date,b=!1;do if(b=this.parse(),new Date-a>=this.wS)break;while(!b);this.C2=b?null:g.a.Kc(this.J2,this)},Qqa:function(){this.C2|| (this.C2=g.a.Kc(this.J2,this))},Zha:function(){return document.createElement("canvas")},parse:function(){var a,b=!1,c=this.Xo,d=this.Gu[this.Xo];if(d.np())6===c&&(b=!0),this.Xo=(this.Xo+1)%7;else{a=d.ina();var e=a[3],f=e.ia?512:256;if("groupcomplete"===a[0])e.set("display",0);else{var h=a[2];if(e.sa.Pc(h.key))if("co"===a[0])if(3===a[1])this.wQ(e,h,f),h.va.region&&e.Wa.eI(h.va.region,0,h.oa.z);else if(4===a[1])this.wQ(e,h,f),h.va.road&&e.Wa.z3(h.va.road,h.oa.z);else if(5===a[1]&&h.va&&h.va.building)a= g.kj&&g.kj.X0(e.e.C),e.ge?h.Ze=h.va.building:(this.wQ(e,h,f),e.Wa.eI(h.va.building,1,h.oa.z,void 0,a));else{if(7===a[1]){h.$e&&(e.$I&&0===(h.oa.x+h.oa.y)%2&&h.$e.getContext("2d").drawImage(e.$I,0,0),h.rga=!0);if(h.Jm){h.Jm.Je=null;h.mi=null;f=e.e.tc;if(e.Rf&&f.Rf){c=f.Rf.JF(f.Rf.na,h.Jm);c.hc=f.Rf.hc;f={Di:c,tagName:"CANVAS",width:h.Jm.width,height:h.Jm.height};c=0;for(a=h.ga.length;c<a;c+=1)for(var k=h.ga[c],l=0,m=k.Aa.length;l<m;l+=1)k.Aa[l]==h.Jm&&(k.Aa[l]=f);h.ga.mra=!0}h.Jm=null}h.jna||(h.La= h.Ea=!0);e.set("display")}}else g.E6.hoa(h,a[0],this.wsa[a[1]].type,e)}d.np()&&(6===c&&(b=!0),this.Xo=(this.Xo+1)%7)}return b},wQ:function(a,b,c){a.Wa||(a.Wa=new g.O.canvas.gd.Tc(a),a.Wa.L=a.e.L);var d=1;18==b.oa.z&&(d=a.X.get("map",null,!0).get("zooms")[1],d=Math.pow(2,18-d));b.$e||(b.$e=this.Zha(),b.$e.width=b.$e.height=c/d,b.rga=!1);b.$e&&(a.Wa.Qa=b.$e,a.Wa.Nf=d,a.Wa.Jc=1/d)}});g.o.rv.ai=new g.o.rv;g.qv={yA:function(a,b){this.e.C.op&&(this.Zf={},this.Zf.lxa=g.a.Ab(this.Zf),b.wc||(b.wc=g.US()),this.wc=b.wc,this.wc.h("tiles",this.VB,this),this.wc.h("ack",this.UB,this),this.wc.h("disable",this.SB,this))},csa:function(){this.e.C.op&&(this.Zf=null,this.wc&&(this.wc.I("tiles",this.VB,this),this.wc.I("ack",this.UB,this),this.wc.I("disable",this.SB,this),this.wc=null))},nw:function(){if(!1===this.e.C.get("workerMode"))return!1;g.ck.N0||this.vV(g.ck);g.ed.N0||(this.vV(g.ed),g.ed.iP&&C.event.rw(this.e.C, "complete",function(){g.ed.iP()}));if(this.Ag&&!this.Pn&&g.ck.ysa||this.Pn&&g.ck.jma||!this.Pn&&!this.Ag&&this.di&&g.ed.J0)return!0},vV:function(a){a.Jf(null,{Ce:g.Ce});a.N0=!0},gba:function(a){g.a.Nb(a,function(a){g.Ej.Un(a)})},Ix:function(a){if(this.j&&a.CP===this.j.hc){this.Se||this.Cg?this.Zz([this.j,"groupcomplete",null,null,"allbase"]):(this.wj(),this.pn.Fw(this.j,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Cc.length;b<c;b+=1)this.WB(a.Cc[b],a.wx,a.Fp,a.Y)}},WB:function(a,b){var c= a.dd,d=this.sa.get(a.oi);if(d){var e=this.j.ga,f="";(this.e.Hl&&!this.e.Ac||this.Fla&&this.e.Ac)&&this.XN(c,a.Oa);"poilabel"===c||"roadlabel"===c?(a.kd||(f=a.Oa,a.kd=null),d.ga||(d.ga=[]),d.ga.push.apply(d.ga,a.Oa),c===this.j.ga[this.j.ga.length-1]&&(d.kd=null)):d.va[c]=a.Oa;"building"!==c&&"poilabel"!==c||!a.Gm||d.Yd||(d.Yd={},d.Yd.Ze=a.Gm,g.jj&&g.jj.q("vecTileParsed.buildings",{mo:d}));if("roadlabel"!==c&&"poilabel"!==c||this.S0||!g.l.VZ&&!this.e.Ac)this.Se||this.Cg?this.Zz([this.j,f,d,b,c]):(this.wj(), this.pn.Fw(this.j,f,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.Se||this.Cg?this.Zz([this.j,"tileComplete",d,b,c]):(this.wj(),this.pn.Fw(this.j,"tileComplete",d,b,c)))}},PD:function(){if(this.e){var a=this.e.C.getMapStyle();this.ur=a;this.Naa(a);this.wc&&this.wc.e1()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:g.l.Y&&!this.j.ia?"6":"5",rd:this.j.ia?2:1}},this.nw()?(g.ed.Tga(a,g.a.Br),this.wc.vxa()||this.wc.close()): this.wc.send(a))}},mapStyleChanged:function(){this.PD()},styleChanged:function(){this.PD()},SB:function(){for(var a in this.Zf)this.Zf.hasOwnProperty(a)&&this.Zf[a].Bb&&(this.al(this.Zf[a].Bb,this.Zf[a].zd),delete this.Zf[a]);this.wc=null;this.Pk("mapStyle");this.set("display",1)},UB:function(a){var b=a.reqId;this.Zf[b]&&(!a.content.status&&this.Zf[b]&&this.al(this.Zf[b].Bb,this.Zf[b].zd),delete this.Zf[b])},VB:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.iA())&&this.Zf[b]){var c=a.content.opt, d=this.Zf[b].Bb[0];c!==this.ab&&!d.pe||d.pe&&2<(this.iA()||Math.abs(c-this.ab))?this.al(this.Zf[b].Bb,this.Zf[b].zd):this.Cr(a.content.data,c)}},vY:function(a,b){if(g.mj){var c=a.hf,c={"x-vd-v":c.Ke,tv:c.vh,bgc:this.e.je,vdataVersion:c.vf,url:this.Ww(a.zd,[]),o:this.j,ge:this.e.C.get("showBuildingBlock")};b?a.Bb.length&&(c.kd=!0,c.data=g.a.map(a.Bb,function(a){return{key:a.key,data:JSON.stringify({key:a.key,kd:a.kd,ga:a.ga,Yd:a.Yd})}})):this.YR||(c.mf=!!this.$i,c.Cc=this.$i||this.di?a.kt:a.data.Cc); g.mj.set(c)}},JP:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;if(this.Ag&&"zh_cn"!==this.lang)for(var d=0;d<a.length;d+=1)a[d].status="loaded",a[d].Ea=!0;else{var e=[],f=this;this.kea(a,b,g.a.bind(function(a,d){var f=this;if(d.length){for(var m=0,n=d.length;m<n;m++){var p=d[m].oa,q=p.x,r=p.y,p=p.z;if(10>p){var s=Math.pow(2,p);if(q>=s||0>q)q=(q+s)%s}q=g.a.jG(q,r,p).join(",");g.a.ha(e,q)||e.push(q)}if(this.nw())if(m=this.k$({tra:d,pe:c,zd:b,Vp:e}),m.$ua=(new Date).getTime(), this.Ag)g.ck.bh(m,function(a,c){if(f.e)if(c.d1){var d=c.Bb.map(function(a){return f.sa.get(a.key)}).filter(function(a){return a});f.al(d,b)}else c.Ck&&f.aF(),f.Pn?(g.a.Nb(c.Bb,function(a){this.sa.set(a.key,a);a.kd&&!a.kd.loaded&&(g.Ej.Un(a.kd),a.kd.loaded=!0);a.Yd&&a.Yd.Ze&&g.jj&&g.jj.q("vecTileParsed.buildings",{mo:a})},f),f.set("display"),f.vY(c,!0)):(g.a.Nb(c.Bb,function(a){var b=this.sa.get(a.key);b&&(b.status=a.status,a.M&&a.M.Aa&&this.gba(a.M.Aa))},f),c.data&&f.Ix(c.data))});else{var u=g.ed.D1; this.e.C.La&&!g.ed.wia&&this.e.C.op||(u=g.ed.bh);this.PD();u(m,function(a,c){if(f.e){if(c.d1){var d=c.Bb.map(function(a){return f.sa.get(a.key)}).filter(function(a){return a});f.al(d,b)}if(u===g.ed.D1){if(c.disabled){g.ed.wia=!0;f.set("display");return}if(c.Pfa)return}c.Ck&&f.aF();c.data&&(f.e.je!==c.ht&&(f.e.je=c.ht),g.a.Nb(c.Bb,function(a){var b=this.sa.get(a.key);b&&(b.status=a.status)},f),f.vY(c),c.data&&f.Ix(c.data))}})}else!this.Ag&&this.wc&&this.wc.e1()?this.e.C.get("workerMode")?this.BE(d, b,e,c):(1>this.wc.ta.length||3<this.Ss?this.BE(d,b,e,c):((2===this.wc.ta.length||this.wc.fH())&&this.PD(),this.iba(d,b,e,c)),this.wc.Eza(this.wc.ta.length+1),this.wc.r1&&this.wc.gva(Math.ceil((new Date-this.wc.r1)/1E3)),this.wc.r1=new Date):this.BE(d,b,e,c)}},this));window.renderDelay&&(this.cI=setTimeout(function(){f.AH&&f.set("display",!1);f.AH=!1;f.cI=null},window.renderDelay))}},Naa:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.YR=!0:this.YR=!1},kea:function(a,b,c){var d=g.mj; if(d&&!this.YR&&18>=b){var e=this,f=this.e,h=f.C;f.DB||void 0!==f.pH||("dv"===h.get("baseRender")?f.pH=1:f.pH=2);d.get({type:h.La?"NFS":"FS",ge:this.j.Ut||this.j.ge,ora:a,mf:!!this.$i,o:this.j,url:this.Ww(b,[]),timeout:1E3},function(d,h){if(e.j){if(d)return c(null,a);h.T1.length&&c(null,h.T1);if(h.ZO.length)if(h.ZO.length===a.length&&(f.DB&&(f.pH--,e.aF()),e.e.C.La||e.Ag||e.xB||e.e.r3()),h.Cc){e.Ke=h.hf["x-vd-v"];e.vh=h.hf.tv;var m=h.hf.bgc;e.e.je!==m&&(e.e.je=m);g.a.forEach(h.ZO,function(a){a.status= "loaded"});e.G2(h.Cc,b)}else h.z1&&(g.a.forEach(h.z1,function(a){var b=e.sa.get(a.key);if(b){b.status="loaded";b.Yd=a.Yd;if(a.kd){b.kd=a.kd;b.ga=a.ga;var c="limg-"+a.key+"-"+e.j.hc;b.kd.Wj=c;b.ga&&(g.a.forEach(b.ga,function(a){a.Aa&&g.a.forEach(a.Aa,function(b,d){b&&0===b.indexOf("limg-")&&(a.Aa[d]=c)})}),g.Ej.Un(b.kd),b.kd.loaded=!0)}b.Yd&&b.Yd.Ze&&g.jj&&g.jj.q("vecTileParsed.buildings",{mo:b});b.Ea=b.La=!0;e.sa.set(a.key,b)}}),e.set("display"))}})}else c(null,a)},iba:function(a,b,c,d){if(!d||!this.iA()){var e= [(new Date).getTime(),this.wc.ta.length+1&65535,d?1:0].join("-"),f={command:"tiles",reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.j.ga.join(","),v:g.Ce?"3":"2"}}},h;if(!this.wc.fH()){var k=this;setTimeout(function(){k.wc&&!k.wc.fH()&&(k.Ss?k.Ss++:k.Ss=1,k.wc.Wia(h)&&(delete k.Zf[e],k.BE(a,b,c,d)))},300)}h=this.wc.send(f);this.Zf[e]={Bb:a,zd:b}}},$P:function(a){if(!a.La||a.pe)a.status="",a.La=void 0,a.Ea=null,a.$e=null,this.sa.Pu(a.key)},k$:function(a){var b=a.tra,c=a.zd,d=a.Vp;a=a.pe;var e=+new Date+ "_"+Math.random();return{hc:e,ht:this.e.je,Ac:this.e.Ac,Ag:this.Ag,Pn:this.Pn,ge:this.j.ge,Gla:!!g.Ce,Rk:this.e.C.view.type,mf:this.$i,BP:this.j.hc,ga:this.j.ga,bd:this.j.ia,nb:this.j.nb,NO:Math.ceil(this.Jj.gx),Bb:g.a.filter(b,function(a){return"loaded"!==a.status}),zd:c,Vp:d,pe:a,url:this.Ww(c,d,b)+"&_id="+e,hh:this.YU(c,[]),Xxa:this.e.C.La}},YU:function(a,b){return{lP:"3D"===this.j.e.C.view.type,YM:this.j.ge,Gq:g.w.Gq||null,vva:this.j.get("businessIconsID"),Ke:this.Ke,Ac:this.e.Ac,vh:this.vh,kxa:this.j.get("iconsID"), CP:this.j.hc,wx:a,jx:this.j.jx,Mf:!this.j.fp()&&this.j.X.get("merge"),Cc:b,Y:this.j.get("forceBig")||g.l.Y,Rk:this.e.C.view.type,mode:this.j.get("mode"),Poa:g.w.vc,E3:this.j.get("forceBig")?1:this.j.nb,Fp:this.j.get("forceBig")?!1:this.j.ia,vw:this.j.get("forceBig")||g.l.Y&&!this.j.ia?1:0}},mz:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},G2:function(a,b){if(a.length){var c=this,d=null;this.$i? (d=g.ed,d=d.parseDataToWebGL):d=this.Ag?g.ck.parseLabel:g.ed.parseDataToVector;var e=c.YU(b,a);e.Ce=g.Ce;d(e,function(a,b){if(c.j&&!a){var d=b.icons;if(d)for(var e=0;e<d.length;e+=1)g.Ej.Un(d[e]);b.data&&c.Ix(b.data)}})}},Cr:function(a,b,c){if(this.j){for(var d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.Ke=h["x-vd-v"],this.vh=h.tv,this.vf=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.e.je!==h&&(this.e.je=h))):this.TB(h,b,d))}this.G2(d,b)}},TB:function(a, b,c){function d(d,e,f){e=[f,d,e].join("/");18<b&&!l.$i&&(e+="/"+b);if((d=l.sa.get(e))&&"loaded"!==d.status)if(l.S4(d,p)||d.pe){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.kd=e,"string"===typeof e.b&&(e.b=l.mz(e.b)),f="",f="object"===typeof e.u?e.u.url:e.u)d={url:f,Wj:"limg-"+d.key+"-"+l.j.hc},e.u=d,g.Ej.Un(d)}else{e={Sj:d.oa,oi:e,Oa:a,dd:m,jx:l.j.jx,xw:l.e.je,xB:"building"===m,ci:"poilabel"===m||"roadlabel"===m||"building"===m&&l.j.ge};if("poilabel"===m||"roadlabel"===m)e.kd=d.kd;m===n[n.length- 1]&&(d.status="loaded");c.push(e)}}else l.kR(b,d,p,g.a.bind(l.$P,l))}var e=a[0].split("-"),f=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.j.ga,p=18<b?Math.pow(2,b-18):1,e=l.Jj.gx,q=Math.pow(2,k);10>k&&(f<=e&&d(f+q,h,k),f>=q-e&&d(f-q,h,k));d(f,h,k)},Zz:function(a){this.Ys||(this.Ys=[]);this.Ys.push(a)},wj:function(){if(this.Ys&&this.Ys.length){for(var a=0,b=this.Ys.length;a<b;a+=1)this.pn.Fw.apply(this.pn,this.Ys[a]);this.Ys=[]}},al:function(a,b){for(var c=18<b?Math.pow(2, b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.kR(b,e,c,g.a.bind(this.$P,this));18<b&&this.sa.Pu(e.key+"/"+b)}g.mj&&g.mj.Pu({Bb:a,url:this.Ww(b,[]),o:this.j,mf:!!this.$i,ge:this.j.ge})},Ww:function(a,b,c){return this.j.url+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].pe?1:0)},N$:function(){var a=this.j.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},aF:function(){this.e.DB||g.ze.Te.end({key:this.N$(),index:0,id:this.e.C.id})},BE:function(a,b,c){function d(a,c){var d=a.split("|"); d[0]=c+d[0];var e=d,f="";d[d.length-1]&&(f=d[d.length-1],e=d.splice(0,d.length-1));k.Cr(e,b,!0);return f}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,f=new XMLHttpRequest;f.pC=[(new Date).getTime(),e?1:0].join("-");var e=this.Ww(b,c,a),h=0,k=this;f.Cp="";f.onreadystatechange=function(){if(k.j&&!(2>f.readyState)){var c=4===f.readyState&&0===f.status;b!==k.ab&&c&&!f.os?(f.os=!0,k.al(a,b),f.onreadystatechange="",c||f.abort()):f.os||(3===f.readyState?(c=f.responseText.substring(h), f.Cp=d(c,f.Cp),h=f.responseText.length):4===f.readyState&&(k.aF(),c=f.responseText.substring(h),k.Ag&&(c+="|"),d(c,f.Cp),f.Cp="",k.e.C.La||g.ze.Te.push({id:k.e.C.id,key:"ds",gf:f.responseText.length/2})))}};f.onerror=function(){};this.Vka||(this.Vka=1);f.open("GET",e,!0);f.send()},S4:function(a,b){var c=this.$u||this.Jj,d=a.oa.x,e=a.oa.y;return d>Math.floor(c.Hc/b)||d<Math.floor(c.Ic/b)||e>Math.floor(c.Bc/b)||e<Math.floor(c.nc/b)?!1:!0},kR:function(a,b,c,d){d(b)}};g.O.canvas.nj=g.O.ti.extend({ha:[g.qv],r:function(a,b){arguments.callee.ma.apply(this,arguments);this.hc=g.a.Ab(this);this.$m=300;this.Oe=a.Oe;this.Ag=this.di=!0;this.W("mapStyle",a.e);this.W("style",a.e);this.Pn=!0;this.hw=1;var c=this;this.oV=function(){c.d2=!0;c.set("display",0)};this.xg();this.FP(a)},FP:function(a){a=g.l.Y||a.ia?"big":"small";var b=g.w.vc+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";g.Ej.Un(g.w.vc+"://vdata.amap.com/style_icon/icon-normal-"+a+".png");g.Ej.Un(b)},nz:function(a){g.Ej.nha(a, this);var b=g.O.canvas.nj.Mc.nz;b&&b.apply(this,arguments)},xg:function(){this.cm=document.createElement("canvas");this.cm.className="amap-labels";this.cm.draggable=!1;this.cm.a1=!0;this.kk=this.cm.getContext("2d",{alpha:!0});this.s1=[];this.jr=10},ru:function(a){var b=Math.pow(2,a.Q.zoom-this.se),c=this.j.ia?this.j.nb:1,d=a.Q.hb.Ya(this.qr).Wc(this.Nf);this.transform={translate:this.transform.translate.add(d.Nd(c)),scale:b/c,rotate:0};this.hb=a.Q.hb},Ux:function(a,b){if(!this.Ca||3E4<Math.abs(this.hb.x- this.Ca.x)/this.S||3E4<Math.abs(this.hb.y-this.Ca.y)/this.S)this.Ca=this.hb;this.Qe=this.se;this.Oj=this.Nf;this.ee=!1;this.currentTime=+new Date;this.$R=b.$R;this.Ud=[this.Ja.Zb.x,this.Ja.Zb.y];this.ek=b.HF;var c=this.Kg;this.Se=this.zoom<<0!==this.zoom;var d=this.hb.Ya(this.Ca);d.x<-g.a.za/2&&(d.x+=g.a.za);d.x>g.a.za/2&&(d.x-=g.a.za);this.bN=d.Wc(this.Nf);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var f=e[0].oa.z,h=!1;if(e.ag&&!g.Aa.qe&&("stable"==this.xf||f<=this.zoom&&"zoomIn"===this.xf|| f>=this.zoom&&"zoomOut"===this.xf)&&(!this.labels||!this.labels.length||this.kH||a.Ek||!this.gC(this.labels.Ok,this.Jj)||this.ZG(a)||this.Hf!==a.Hf)){h=!0;h=[];a.Hf&&(h.push.apply(h,a.Hf),this.Hf=a.Hf);a.tb.length?(h.push.apply(h,a.tb),this.As=a.tb.$M):this.As=null;for(var k=e.length-1;0<=k;k-=1){var l=e[k],m=!1,n=l.ga;!n&&l.Ob&&l.Ob.ga&&(n=l.Ob.ga,m=!0);if(n)for(var p=0,l=n.length;p<l;p+=1){n[p].reverse=m;var q=!1,r=n[p].ta;this.As&&g.a.Nb(this.As,function(a){!q&&g.sd.Jd(r,a.of[0].ta)&&(q=!0)}); q||h.push(n[p])}}e=[];k={};if(h.length)for(m=0,l=h.length;m<l;m++)h[m].id in k||(k[h[m].id]=1,e.push(h[m]));e.zoom=f;this.PP(e);e.sort(function(a,b){return a.zIndex!==b.zIndex?a.zIndex>b.zIndex?-1:1:!a.Pe^!b.Pe?a.Pe?1:-1:a.Pe==b.Pe?a.id==b.id?a.De==b.De?a.name<b.name?-1:1:a.De>b.De?-1:1:a.id<b.id?-1:1:a.Pe>b.Pe?-1:1});this.labels=e;this.labels.Ok=this.Jj;this.kH=!1}}}if(this.dN(a)){this.Id();if(!this.e.C.La)return;this.QQ(a);this.Yg=this.labels}this.d2=!1;this.uf(a)},PP:function(a){this.labels&&this.labels.opacity|| (this.labels=[],this.labels.opacity={});for(var b={},c=0;c<a.length;c+=1){var d=a[c].id;d&&(d in this.labels.opacity?(b[d]=this.labels.opacity[d],delete this.labels.opacity[d]):b[d]=0,a[c].Xi=!0)}for(var c=0,e=this.labels.length;c<e;c+=1)d=this.labels[c].id,this.labels.opacity[d]&&(a.push(this.labels[c]),b[d]=this.labels.opacity[d],this.labels[c].Xi=!1);a.opacity=b},Id:function(){if(this.ag&&!this.j.La){var a=this.j;g.ze.Te.end({id:this.e.C.id,key:"rl",index:2});a.La=!0;a.xd?a.ka("renderComplete"): (a.xd=!0,a.ka("complete"))}},pc:function(a,b){this.lang=a.lang;this.ur=a.ur;this.es=a.es;this.ao(a,b);this.Se||this.wj();this.qr&&(a.a5||a.HR&&g.l.ll||a.Cg&&!a.Se&&a.vga)?this.ru(a,b):this.Ux(a,b);this.qr=this.hb;this.ee&&this.set("display",0);this.AP=this.xf},uf:function(a){var b=this.hb.Ya(this.Ca);b.x<-g.a.za/2&&(b.x+=g.a.za);b.x>g.a.za/2&&(b.x-=g.a.za);this.transform={translate:new g.G(a.Q.Ja.mc.x*(this.j.ia?this.j.nb:1),a.Q.Ja.mc.y*(this.j.ia?this.j.nb:1)),scale:1/(this.j.ia?this.j.nb:1),rotate:0}}, gC:function(a,b){return a.nc===b.nc&&a.Ic===b.Ic&&a.Bc===b.Bc&&a.Hc===b.Hc},$w:function(a,b){var c;if(this.zoom){var d=a.Wc(Math.pow(2,20-this.zoom));this.labels&&(c=this.dka(d,b))&&(c.Y0=!1);!c&&this.tb&&(c=this.cka(d))&&(c.Y0=!0)}return c?[c]:[]},dka:function(a,b){for(var c=a.x,d=a.y,e=this.labels.Lxa||this.labels,f=e.length-1;0<=f;f-=1){var h=e[f],k=h.ta[0]/this.S,l=h.ta[1]/this.S;if((h.Dr||!b)&&this.U0(h,c,d,k,l))return h}},cka:function(a){var b=a.x;a=a.y;for(var c=this.tb.length-1;0<=c;c-=1){var d= this.tb[c],e=d.ta[0]/this.S,f=d.ta[1]/this.S;if(d.Dr&&this.U0(d,b,a,e,f))return d}},U0:function(a,b,c,d,e){for(var f=0;f<a.Ta.length;f+=1){var h=a.Ta[f][2],k=a.Ta[f][3],l=a.Ta[f][0],m=a.Ta[f][1];this.j.ia&&(h/=this.j.nb,k/=this.j.nb,l/=this.j.nb,m/=this.j.nb);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.j&&(this.j.La=!1);this.sa.count&&(this.sa.clear(),g.mj&&g.mj.clear());this.labels=[];this.s1=[];this.Ib&&this.Ib.parentNode&&this.Ib.parentNode.removeChild(this.Ib); this.cm&&this.cm.parentNode&&this.cm.parentNode.removeChild(this.cm);this.set("display")},yj:function(){return this.cm},XN:function(a,b){if("roadlabel"===a||"poilabel"===a)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.kc){var e="",f="",h="";d.cd&&(h=d.cd[0],e=h[3],f=h[4],h=d.Zi?"":h[7]);if(e=this.L.Yw&&this.L.Yw(e,f,h,d.kc,d.vt))d.visible=e[4],d.Rj=e[3];if(d.cd)for(f=0;f<d.cd.length;f+=1)h=d.cd[f],h[3]=e[0],h[4]=e[1],d.Dl&&(h[7]=e[2])}}}});g.CJ={Ww:function(a,b,c){return this.j.$t+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].pe?1:0)},Cr:function(a,b){if(this.j){for(var c=[],d=[],e=0,f=a.length;e<f;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.Ke=h["x-vd-v"],this.vf=[h.tv||"",h.vdv].join("-"),this.vh=h.tv,this.e.je="#"+h.bgc.substring(2)):(h=this.TB(h,b,c,this.Ke||"v4"))&&d.push(h))}this.set("display")}},Qx:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.S;return[(c+a[0])*e,(d+a[1])*e]},TB:function(a,b,c,d,e){function f(c, f,m){c=[m,c,f].join("/");if(c=q.sa.get(c)){f=c.oa;var n="3D"==q.e.C.view.type?0:-3;if(c&&"loaded"!==c.status)if(q.S4(c,u)||c.pe){if(-1!==s.indexOf(r))if("limg"===r)a[1]&&(c.kd={url:"data:image/png;base64,"+a[1],Wj:"limg-"+c.key+"-"+q.j.hc},g.Ej.Un(c.kd));else{if("roadlabel"===r)for(var p=1;p<a.length;p+=1){var x=a[p],B=g.a.Ou(x[1],d);if(!(0>B[0]||256<=B[0]||0>B[1]||256<=B[1])){var A=q.Qx(B,f),B={margin:0,z:m,zIndex:9E3,ta:A,name:x[0],Zi:!0,Ma:B,Aa:[],Ta:[],visible:!0,Rj:!0};B.id="roadlabel_"+g.a.Ab(B); B.Ip=15>x[2]%90||75<x[2]%90?90*Math.floor((x[2]+15)/90):x[2];A=x[3];0<=x[8]&&(B.VE={name:x[6],N4:x[7],dir:x[8]});var H=A[2],G=A[3],n=-Math.floor(G/2);if(x[4]){B.Xt=!0;var I=x[5].split(":"),K=I[1],K=parseInt(K)-1,I=g.w.vc+"://vdata.amap.com/style_icon/icon-normal-"+(k||l?"big":"small")+".png";B.Aa.push(I);var I=Math.floor(K/10),N=K%10,M=0,L=0,E=0;l?(M=48,E=L=40):k?(M=L=40,E=36):(M=L=24,E=20);var Q=M*Math.max(H+2,E)/E,I=[-Q/2,-M/2,Q,M,L*N,L*I,L,L];B.De=7;B.Ta.push(I)}B.Aa.push(c.kd.Wj);B.De=11;B.Ta.push([-Math.floor(H/ 2),n,H,G,A[0],A[1],A[2],A[3]]);c.ga||(c.ga=[]);c.ga.push(B)}}else if("poilabel"===r){for(var P=[],p=1;p<a.length;p+=1)if(x=a[p],B=g.a.Ou(x[1],d),!(0>B[0]||256<=B[0]||0>B[1]||256<=B[1])){A=q.Qx(B,f);B={id:x[4],margin:n,zIndex:9001,ta:A,name:x[0].replace("^",""),Dl:!0,Ma:B,Aa:[],Ta:[],visible:!0,Rj:!0};B.id||(B.id="poilabel_"+g.a.Ab(B));K=0;B.Pe=x[8];x[6]&&(I=x[6].split(":"),K=I[1],G=Math.floor((parseInt(I[0].split("_")[1])-28)/2));if(K&&x[3]){I=g.w.vc+"://vdata.amap.com/style_icon/icon-"+(1===G?"biz-": "normal-")+(k||l?"big":"small")+".png";B.Aa.push(I);K=parseInt(K)-1;I=Math.floor(K/10);N=K%10;l?(M=48,L=40,E=28):k?(M=L=40,E=28):(M=L=24,E=20);Q=M;if(151===K||152===K||153===K)E-=4,H=x[7][0][2],Q=M*Math.max(H+2,E)/E;I=[-Q/2,-M/2,Q,M,L*N,L*I,L,L];B.Ta.push(I)}if(x[2]&&x[7])for(H=x[2],I=0;I<x[2].length;I+=1)B.Aa.push(c.kd.Wj),A=x[7][I],l&&!e&&(H[I][0]=Math.round(H[I][0]*v),H[I][1]=Math.round(H[I][1]*v),H[I][2]=Math.round(H[I][2]*v),H[I][3]=Math.round(H[I][3]*v)),N=H[I][0],M=H[I][1]-(l?4:2),L=A[3],E= A[2],N<-E&&K&&x[3]&&(N=-E+B.Ta[0][0]),N-=2,B.De=L-4,4===m&&"\\u5317\\u4eac"===B.name&&(M=l?-50:-26),B.Ta.push([N,M,E,A[3],A[0],A[1],A[2],A[3]]);B.nr=x[5];B.nr&&P.push(B.nr);B.Dr=x[4];B.gi=x[9];B.O1=x[10];B.If=K;B.Pt=G;c.ga||(c.ga=[]);c.ga.push(B)}c.Yd||(c.Yd={},c.Yd.Ze=P,g.jj&&g.jj.q("vecTileParsed.buildings",{mo:c}))}r===s[s.length-1]&&(c.status="loaded",h=c,c.La=c.Ea=!0)}}else q.kR(b,c,u,g.a.bind(q.$P,q))}}var h=null,k=g.l.Y,l=this.j.ia,m=a[0].split("-");1===m.length&&(m=a[0].split("_"));c=parseInt(m[1]); var n=parseInt(m[2]),p=parseInt(m[0]),q=this,r=m[3],s=this.j.ga,u=18<b?Math.pow(2,b-18):1,m=Math.ceil(q.Jj.gx),v=this.j.ia?this.j.nb:1,x=Math.pow(2,p);10>p&&(c<=m&&f(c+x,n,p),c>=x-m&&f(c-x,n,p));f(c,n,p);return h}};g.O.canvas.BJ=g.O.canvas.nj.extend({ha:[g.CJ]});g.O.canvas.nj.wb({QQ:function(a){this.hw++;var b=this.cm,c=this.kk;this.fx={};var d=this.j.ia?this.j.nb:1;this.Sg=d;var e;0!==a.Q.rotation?(e=2*Math.floor(a.Q.Ja.mc.x)*d,d*=2*Math.floor(a.Q.Ja.mc.y)):(e=a.size.width*d,d*=a.size.height);g.g.ko(b,e,d,!0);g.l.iha&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.Bj=0;this.labels&&this.tQ(this.labels);this.labels&&this.ypa(this.labels,c,g.kj.kka(this.e.C),this.Uc,e,d);this.p1=[];this.labels&&(this.labels.jo=this.zoom,this.labels.io= this.hb,this.labels.Ep=this.rotation,this.labels.fI=this.j.ia,this.labels.size=a.size);a.tb&&(this.tb=a.tb);this.tb&&(this.tb.jo=this.zoom,this.tb.io=this.hb,this.tb.Ep=this.rotation,this.tb.size=a.size);this.q("afterLabelRender")},xpa:function(a,b,c){var d=void 0===b.Rj?!0:b.Rj,e=1,f=void 0===b.visible?!0:b.visible,h=null;if(b.kc&&this.e.Ac){var k=h="",l="";b.cd&&b.cd.length&&this.CN&&(l=b.cd[0],h=l[3],k=l[4],l=b.Zi?"":l[7]);if(h=this.L.Yw&&this.L.Yw(h,k,l,b.kc,b.vt))f=h[4],d=h[3],e=h[5]}if(f){if(this.kk.globalAlpha!== c||e)this.kk.globalAlpha=c||e;f=0;for(k=b.Aa.length;f<k;f+=1)(d||"CANVAS"===b.Aa[f].tagName)&&this.Hia(a,b.Aa[f],b.Ta[f],b.Ip,c||e);this.kk.globalAlpha!==c&&(this.kk.globalAlpha=c);b.cd&&this.CN&&(b.Ri?this.Jia(a,b,h):b.cd.length&&this.CN(a,b,h))}},Hia:function(a,b,c,d){var e=this.kk;b=this.Fn(b);if(!b)return 1;var f=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length? b.loaded&&e.drawImage(b,k,a,f,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,f,h);0!==d&&e.setTransform(1,0,0,1,0,0)},Fn:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=g.Ej.u_(a))&&a.loaded)return a},LG:function(a,b){var c=a[0];b&&(c>g.a.za/2?c-=g.a.za:c<-g.a.za/2&&(c+=g.a.za));return this.Rq(c,a[1])},Rq:function(a,b){var c=this.j.ia?this.j.nb:1,d=this.S,e=0,f=0,e=(a-this.Ud[0])/d,f=(b-this.Ud[1])/d;return[Math.round(e*c),Math.round(f*c)]},E_:function(a,b){var c=a[0];b&&(c> g.a.za/2?c-=g.a.za:c<g.a.za/2&&(c+=g.a.za));return[c/this.S,a[1]/this.S]},dma:function(a,b){var c=a.ta;return c[0]>b.Md.x||c[1]>b.Md.y||c[0]<b.Zb.x||c[1]<b.Zb.y?!1:!0},Iwa:function(a){var b=this.p1;if(this.p1.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.Dl&&this.dma(e,a.Q.Ja)&&(this.s1.push(e),e.zoom=b.zoom,e.jxa=new Date)}},kp:function(a,b){var c=this.E_(a.ta,a.reverse);if(a.Dl)return this.E0(c,a,b);if(a.Zi){var d=!1,e=a.ta;if(a.Ri){var f=Math.pow(2,20-this.zoom),h=20*f, c=[],k=[],l=[],m=!0;for(g.Du.font=a.Rp+"px "+a.font;m;){for(var n=[],p=[],q=!0,r=0;r<a.name.length;r+=1){var s=g.Du.measureText(a.name[r]).width/this.Sg*f,u=g.lj.GM(e,s/2+h),h=h+s;if(!u){m=q=!1;break}if(s=this.cP(this.E_(u),5,b))p.push(s),n.push(u);else{q=!1;break}}h+=256*f;q&&(k.push.apply(k,n),c.push.apply(c,p))}if(k.length){d=!0;for(r=0;r<k.length;r+=1)f=k[r][2],f=(new g.G(e[f+1][0]-e[f][0],e[f+1][1]-e[f][1])).direction(),l.push(360-f);a.DP=k;a.ima=l}return d?c:!1}return a.Am?this.E0(c,a,b):this.zoom< a.z?!1:!0}},tQ:function(a){function b(b){a.opacity[b]<1-e?(a.opacity[b]+=e,d.ee=1,d.Bj=1):a.opacity[b]=1}function c(b){a.opacity[b]>e?(a.opacity[b]-=e,d.ee=1,d.Bj=1):a.opacity[b]=0}var d=this,e=0.34;if(!a.eD||"stable"==this.xf&&"stable"!=this.AP){for(var f=0,h=a.length;f<h;f+=1){var k=a[f],e=k.Am||g.l.Y?1:0.34,l=k.id;if(k.Xi){var m=this.kp(k);m?(this.lo(m),k.wg=!0,b(l)):(k.wg=!1,c(l))}else l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Bj=this.ee=1):delete a.opacity[l])}a.eD=!0}else if("zoomIn"== this.xf){f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.Am||g.l.Y?1:0.34,l=k.id,k.Xi?k.wg&&(m=this.kp(k,!0),this.lo(m),b(l)):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Bj=this.ee=1):delete a.opacity[l]);f=0;for(h=a.length;f<h;f+=1)k=a[f],e=k.Am||g.l.Y?1:0.34,l=k.id,k.Xi&&!k.wg&&((m=this.kp(k))?(this.lo(m),k.wg=!0,b(l)):(k.wg=!1,c(l)))}else if("zoomOut"==this.xf||a.zoom>this.zoom)for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.Am||g.l.Y?1:0.34,l=k.id,k.Xi?k.wg?(m=this.kp(k))?(this.lo(m),k.wg=!0,b(l)):(k.wg= !1,c(l)):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Bj=this.ee=1):delete a.opacity[l]);else for(f=0,h=a.length;f<h;f+=1)k=a[f],e=k.Am||g.l.Y?1:0.34,l=k.id,k.Xi?k.wg?b(l):c(l):l in a.opacity&&(a.opacity[l]>e?(a.opacity[l]-=e,this.Bj=this.ee=1):delete a.opacity[l]);return!1},ypa:function(a,b,c,d,e,f){d=!1;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Zi||k.xo&&c&&0<=c.indexOf(k.xo))){var l=this.LG(k.ta,k.reverse);-256>l[0]||l[0]> e+256||-256>l[1]||l[1]>f+256||a.opacity[k.id]&&this.xpa(l,k,a.opacity[k.id])}}},ZG:function(a){if(a.tb&&a.tb.length)if(this.tb&&this.tb.length){if(this.tb!==a.tb||this.tb.jo!==this.zoom||this.tb.io!==this.hb||this.tb.Ep!==this.rotation||!this.tb.size.cb(a.size))return!0}else return!0;else if(this.tb&&this.tb.length)return!0},dN:function(a){this.Yg&&this.Yg.fI!==this.j.ia&&this.j.set("reload");return this.Bj||this.ZG(a)||this.labels&&(this.e.cO||this.labels!==this.Yg||!this.Yg||this.Yg.jo!==this.zoom|| this.Yg.io!==this.hb||a.Ek||this.Yg.Ep!==this.rotation||this.Yg.fI!==this.j.ia||!this.Yg.size.cb(a.size))?!0:!1},E0:function(a,b,c){var d,e=b.Ta.length,f=[];if(b.gi>this.zoom)d=!0;else for(var h=0;h<e;h+=1){var k=b.Ta[h];if(!k[8]){var l=k[2],m=k[3],n=k[0],k=k[1];this.j.ia&&(l/=2,m/=2,n/=2,k/=2);var p=b.margin,n=n-p,k=k-p,l=l+2*p,m=m+2*p,n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.jr),m=Math.ceil((k+m)/this.jr),n=Math.floor(n/this.jr),k=Math.floor(k/this.jr);(m=c?[n,l,k,m]:this.F0(n,k,l,m))?f.push(m): d=!0}}return d?!1:f},cP:function(a,b,c){var d=a[0]-b/2;a=a[1]-b/2;var e=Math.ceil((d+b)/this.jr);b=Math.ceil((a+b)/this.jr);d=Math.floor(d/this.jr);a=Math.floor(a/this.jr);return c?[d,e,a,b]:this.F0(d,a,e,b)},lo:function(a){for(var b=0;b<a.length;b+=1)for(var c=a[b][0],d=a[b][2],e=a[b][3],f=0,h=a[b][1]-c;f<=h;f+=1)for(var k=0,l=e-d;k<=l;k+=1)this.fx[c+f]||(this.fx[c+f]={}),this.fx[c+f][d+k]=1},F0:function(a,b,c,d){for(var e=0,f=c-a;e<=f;e+=1)if(this.fx[a+e])for(var h=0,k=d-b;h<=k;h+=1){if(1===this.fx[a+ e][b+h])return!1}else this.fx[a+e]={};return[a,c,b,d]}});g.O.canvas.nj.v6=g.Z.extend({r:function(a){this.O=a},ffa:function(a){this.ur=a;return this.iM([0,0,0])?!0:this.ur=!1},IV:function(){return this.O.Se?!1:!0},gaa:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.jaa.apply(this,b);case "label":return this.kaa.apply(this,b);default:console.error("Unknown type",a)}}},UU:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},zfa:function(a){return 0>a?0:255< a?255:Math.round(a)},iY:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.zfa(a[b+c]);return a},hM:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},Wea:function(a){return[255-a[0],255-a[1],255-a[2]]},iM:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.ur){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},laa:function(a,b){var c=20,d=10;switch(b.Mn){case "active":c+=20,d+=20}return this.hM(this.iM(a,c),d)},mV:function(a,b){var c=-110;switch(b.Mn){case "active":c+=30}return this.hM(this.iM(this.Wea(a),c),50)},iaa:function(a){return this.hM(a,20)},lV:function(a, b,c,d,e,f){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],f),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.iY(c,d)},z$:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,f=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.KK(k,l,c,a);if(!(76.5>b[m+3])){e++;k<f[0]&&(f[0]=k);l<f[1]&&(f[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{Jsa:0<e?d/ e:0,Dha:[f[0],f[1],h[0]-f[0]+1,h[1]-f[1]+1]}},KK:function(a,b,c){return b*c+a},hF:function(a,b,c,d,e,f,h){var k=this.KK(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.R1||h.I4&&!h.I4.call(this,d,e,l,a))return!1;f.push([b,c]);return!0},$da:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},$v:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},pfa:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var f=a[d];this.$da(f, c[c.length-1])<=b&&c.push(f)}return this.$v(c[c.length-1],a[a.length-1])?c:null},Vua:function(){},U8:function(a,b,c,d){d=g.extend({R1:0.2,M1:4},d);var e,f,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(f=0;f<b&&!this.hF(a,f,e,b,c,h,d);f++);for(f=b-1;0<=f&&!this.hF(a,f,e,b,c,k,d);f--);}if(!h.length||!k.length)return null;for(f=0;f<b;f++){var n;e=h[0][0];n=k[0][0];if(f>=e&&f<=n)for(e=0;e<c&&!this.hF(a,f,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(f>=e&&f<=n)for(e=c-1;0<=e&&!this.hF(a,f,e,b,c, m,d);e--);}if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.$v(l[l.length-1],k[0])&&this.$v(k[k.length-1],m[0])&&this.$v(m[m.length-1],h[0])&&this.$v(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.pfa(b[e],d.M1),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},f$:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var f=a[d][0], h=a[d][1];b[0]>f&&(b[0]=f);b[1]>h&&(b[1]=h);c[0]<f&&(c[0]=f);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},cV:function(a,b){this.$X||(this.$X=document.createElement("canvas"));var c=this.$X;c.width=a;c.height=b;return c},F$:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},zU:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},IT:function(a,b){a.beginPath();for(var c= 0,d=b.length;c<d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.zU(e))):a[this.F$(e)].apply(a,this.zU(e))}},l$:function(a){a=this.mV([255,255,255],{Mn:a.Mn});this.iY(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},haa:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=g.extend({Mn:"hover",FY:!0,padding:[1.5,1.5]},c);var e=a.width,f=a.height,h=this.cV(2*e+10,f),k=h.getContext("2d"), l=this.f$(b),m=c.padding;g.l.bd&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,s=b.length;l<s;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.IT(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,f,0,0,e,f);a=c.FY&&10<b.length;var u=c.strokeStyle||this.l$(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=g.l.bd?2:1.2;k.stroke();k.restore();return{Ea:h,qg:[0,0,e,f],Id:a?function(a,c){this.qfa(a,c,b,u)}:null}},qfa:function(a,b,c,d){this.Y8();var e=this.O.hw;this.yT(a,c,{duration:200,nQ:0,startTime:Date.now(),lqa:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=g.l.bd?2:1;a.translate(b[0],b[1])},Ksa:function(){return this.O.hw!==e}})},Y8:function(){this.OJ&&g.a.Vh(this.OJ)},yT:function(a,b,c,d){this.IV()?this.OJ=g.a.Kc(function(){this.OJ= null;if(c.Ksa.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var f=Math.round(b.length*e);if(c.nQ<f){var h=1===e?b:b.slice(c.nQ,f+1);h.length&&(a.save(),c.lqa.call(this,a,e),this.IT(a,h),a.stroke(),a.restore());c.nQ=f}1>e?this.yT(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},f9:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,f=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n=4*this.KK(c, m,e,f),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},cba:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},Eaa:function(a,b,c){for(var d=1/c,e=[],f=1;f<c;f++){var h=this.cba(a,b,d*f);e.length&&this.$v(h,e[e.length-1])||e.push(h)}return e},Faa:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],f=a[c];2===f.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.Eaa(e,f,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},I$:function(a, b,c,d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.Faa(a,5);return a},jaa:function(a,b,c,d,e,f){b=a.qg;var h=c?c.fP:this.UU(d,e,b);if(h){var k=c?c.r0:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.f9(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.O.e)&&c.C?c.C.get("hotspotOptions"): {};c=g.extend({borderAnimation:!0},c);l=this.z$(l);a=!a.Qla&&0.46<=l.Jsa;var r=e.createImageData(b,q);e=r.data;for(var s=a?this.mV:this.iaa,u=0,v=d.length;u<v;u+=4)this.lV(d,u,e,u,s,{Mn:f});if(m&&(e=a&&!g.l.bd?this.U8(d,b,q,{I4:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,R1:0.2,M1:4}):null,e||(e=l.Dha,e=this.I$(e[0],e[1],e[2],e[3],0.2)),e)){var x=this.haa(r,e,{Mn:f,fillStyle:"active"!==f?null:"#ddd",EH:h,FY:c.borderAnimation&&"hover"===f&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{EH:h, Tx:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(x.Ea,x.qg[0],x.qg[1],x.qg[2],x.qg[3],b[0],b[1],b[2],b[3]);x.Id&&(x.Id.call(this,a,b),x.Id=null)}}}return{EH:h,Tx:function(a,b){if(m){var c=this.cV(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},kaa:function(a,b,c,d,e,f){a=a.qg;if(c=c?c.fP:this.UU(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.lV(d,a,e,a,this.laa,{Mn:f});return{EH:c,Tx:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},eV:function(a,b,c){var d=c[2],e=c[3],f=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.CV){if((b=this.O.Fn(b))&&b.loaded)return c=[4,4],g.l.bd&&(c[0]*=2,c[1]*=2),{type:"icon",Qla:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,qg:[f-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",qg:[f,a,d,e]}}}); g.O.canvas.nj.wb({SU:function(){this.SK||(this.SK=new g.O.canvas.nj.v6(this));return!1===this.SK.ffa(this.ur)?null:this.SK},ys:function(a,b){var c=this.SU();if(c&&c.IV()&&a&&a.Aa&&a.Ta&&0===this.rotation){var d=this.hw,e=this.LG(a.ta),f=[],h;a.tq||(a.tq=[]);var k=a.tq;for(h=a.Ta.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].r0===b)continue}var l=c.eV(e,a.Aa[h],a.Ta[h]);if(l){var m=c.gaa(l,a,k[h],this.cm,this.kk,b);m&&(k[h]={r0:b,rev:d,fP:m.EH},f.push({Tx:m.Tx,qg:l.qg,dC:"icon"===l.type? 2:1}))}}f.sort(function(a,b){return a.dC-b.dC});h=0;for(d=f.length;h<d;h++)f[h].Tx.call(c,this.kk,f[h].qg),f[h].Tx=null}},gz:function(a){a.tq&&(a.tq.length=0,a.tq=null)},jF:function(){var a=this.kk;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},oF:function(a){if(a&&a.Aa&&a.Ta&&a.tq){var b=this.kk,c=this.SU();if(c){for(var d=this.hw,e=this.LG(a.ta),f=a.tq,h=0,k=a.Ta.length;h<k;h++){var l=f[h];if(l&&(f[h]=null,d===l.rev)){var m=c.eV(e,a.Aa[h],a.Ta[h]);m&&m.qg&&b.putImageData(l.fP,m.qg[0], m.qg[1])}}a.tq=null;this.hw++}}}});g.gv={h:function(a,b,c,d,e){if(this.be(a,b,c||this))return this;var f=this.Ue=this.Ue||{};f[a]=f[a]||[];e?f[a].unshift({rb:b,Je:c||this,Ij:d}):f[a].push({rb:b,Je:c||this,Ij:d});"complete"===a&&this.La&&this.q(a);return this},be:function(a,b,c){var d=this.Ue;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].rb===b&&d[a][e].Je===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},I:function(a,b,c){if(!this.be(a))return this;var d=this.Ue;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].rb!==b&&"mv"!==b||c&&d[a][e].Je!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},DH:function(a,b){if(!this.be(a))return this;var c=this.Ue;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].Je===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},q:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,f;d=0;for(e=b.length;d<e;d+=1)for(c in f=b[d]||{},f)Object.prototype.hasOwnProperty.call(f,c)&&(a[c]=f[c]);return a}if(!this.be(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.Ue[a]),f=0;f<e.length;f+=1)e[f].rb&&(e[f].rb.call(e[f].Je||this,d),e[f]&&e[f].Ij&&this.Ue[a]&&this.Ue[a].splice(f,1));return this},Wh:function(a){a?this.Ue&&this.Ue[a]&&(this.Ue[a]=null):this.Ue=null;return this}};(function(){if(!g.ck){g.ck=g.dJ();var a=g.a.jB({Qx:"posToCoord",mz:"_decodeBoundsList"});g.ck.Jf(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+g.CJ.Qx.toString()+",\\n      "+a._decodeBoundsList+": "+g.qv.mz.toString()+"\\n  }"));g.ck.Jf(null,function(){return{Ab:function(){var a=0;return function(c){c._amap_label_id_||(a+=1,c._amap_label_id_=a);return c._amap_label_id_}}(),Cr:function(a,c){a.hh.Ce||(a.hh.Ce=this.Ce);a.Pn?this.xna.call(this,a,c):this.yna.call(this,a,c)},yna:function(a, c){for(var d=a.VC,e=a.Ck,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.mP&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Ke=a.hh.Ke=l["x-vd-v"],this.vf=a.hh.vf=[l.tv||"",l.vdv].join("-"),this.vh=a.hh.vh=l.tv):this.wna(this.extend({},a,{MA:l,Cc:f})))}f.length?this.parseLabel(this.extend({},a.hh,{Cc:f}),function(d,f){var k=f.data,h=f.fla;c(d,{hc:a.hc,Bb:a.Bb.filter(function(a){return"loaded"===a.status}),data:k,fla:h,Ck:e,hf:{Ke:a.hh.Ke,vf:a.hh.vf,vh:a.hh.vh,zd:a.zd}},{xp:!e,wk:e})}):c(null,{hc:a.hc,data:null, Ck:e},{xp:!e,wk:e})},wna:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key===n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=f[1],a.kd=b,"string"===typeof b.b&&(b.b=u.mz(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,Wj:"limg-"+a.key+"-"+e});else{b={Sj:a.oa,oi:n,Oa:f,dd:v,xB:"building"===v,ci:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.kd=a.kd;v===l[l.length- 1]&&(a.status="loaded");k.push(b)}}var d=a.Bb,e=a.BP,f=a.MA,h=a.zd,k=a.Cc,l=a.ga,m=a.mf,n=a.NO,p=a.ge,q=f[0].split("-");a=parseInt(q[1]);var r=parseInt(q[2]),s=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,s);10>s&&(a<=n&&c(a+q,r,s),a>=q-n&&c(a-q,r,s));c(a,r,s)},xna:function(a,c){for(var d=a.VC,e=a.Ck,f=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.mP&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Ke=a.hh.Ke=l["x-vd-v"],this.vf=a.hh.vf=[l.tv||"",l.vdv].join("-"),this.vh=a.hh.vh=l.tv):this.vna(this.extend({},a,{MA:l, Cc:f,Ke:this.Ke||"v4"})))}d=a.Bb.filter(function(a){return"loaded"===a.status});if(d.length)for(f=a.Bb.length-1;0<=f;f--)"loaded"===a.Bb[f].status&&a.Bb.splice(f,1);c(null,{hc:a.hc,Nva:[],Bb:d,Ck:e,hf:{Ke:a.hh.Ke,vf:a.hh.vf,vh:a.hh.vh,zd:a.zd}},{xp:!e,wk:e})},vna:function(a){function c(a,b,c,f){var l=[f,b,c].join("/");if(a=a.filter(function(a){return a.key===l})[0])if(b=a.oa,a&&"loaded"!==a.status&&-1!==k.indexOf(w))if("limg"===w)p[1]&&(a.kd={url:"data:image/png;base64,"+p[1],Wj:"limg-"+a.key+"-"+ n});else{if("roadlabel"===w)for(c=1;c<p.length;c+=1){var m=p[c],u=d.Ou(m[1],q);if(!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){var v=t.Qx(u,b),u={margin:0,z:f,zIndex:9E3,ta:v,name:m[0],Zi:!0,Ma:u,Aa:[],Ta:[],visible:!0,Rj:!0};u.id="roadlabel_"+d.Ab(u);u.Ip=15>m[2]%90||75<m[2]%90?90*Math.floor((m[2]+15)/90):m[2];v=m[3];0<=m[8]&&(u.VE={name:m[6],N4:m[7],dir:m[8]});var x=v[2],N=v[3],M=-Math.floor(N/2);if(m[4]){u.Xt=!0;var L=m[5].split(":"),E=L[1],E=parseInt(E)-1,L=r.vc+"://vdata.amap.com/style_icon/icon-normal-"+ (s||h?"big":"small")+".png";u.Aa.push(L);var L=Math.floor(E/10),Q=E%10,P=0,J=0,O=0;h?(P=48,O=J=40):s?(P=J=40,O=36):(P=J=24,O=20);var Z=P*Math.max(x+2,O)/O,L=[-Z/2,-P/2,Z,P,J*Q,J*L,J,J];u.De=7;u.Ta.push(L)}u.Aa.push(a.kd.Wj);u.De=11;u.Ta.push([-Math.floor(x/2),M,x,N,v[0],v[1],v[2],v[3]]);a.ga||(a.ga=[]);a.ga.push(u)}}else if("poilabel"===w){M=[];for(c=1;c<p.length;c+=1)if(m=p[c],u=d.Ou(m[1],q),!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){v=t.Qx(u,b);u={id:m[4],margin:e,zIndex:9001,ta:v,name:m[0].replace("^", ""),Dl:!0,Ma:u,Aa:[],Ta:[],visible:!0,Rj:!0};u.id||(u.id="poilabel_"+d.Ab(u));E=0;u.Pe=m[8];m[6]&&(L=m[6].split(":"),E=L[1],N=Math.floor((parseInt(L[0].split("_")[1])-28)/2));if(E&&m[3]){L=r.vc+"://vdata.amap.com/style_icon/icon-"+(1===N?"biz-":"normal-")+(s||h?"big":"small")+".png";u.Aa.push(L);E=parseInt(E)-1;L=Math.floor(E/10);Q=E%10;O=J=P=0;h?(P=48,J=40,O=28):s?(P=J=40,O=28):(P=J=24,O=20);Z=P;if(151===E||152===E||153===E)O-=4,x=m[7][0][2],Z=P*Math.max(x+2,O)/O;L=[-Z/2,-P/2,Z,P,J*Q,J*L,J,J];2<= E&&5>=E&&(L[8]=!0);u.Ta.push(L)}if(m[2]&&m[7])for(x=m[2],L=0;L<m[2].length;L+=1)u.Aa.push(a.kd.Wj),v=m[7][L],h&&(x[L][0]=Math.round(x[L][0]*y),x[L][1]=Math.round(x[L][1]*y),x[L][2]=Math.round(x[L][2]*y),x[L][3]=Math.round(x[L][3]*y)),Q=x[L][0],P=x[L][1]-(h?4:2),J=v[3],O=v[2],Q<-O&&E&&m[3]&&(Q=-O+u.Ta[0][0]),Q-=2,u.De=J-4,4===f&&"\\u5317\\u4eac"===u.name&&(P=h?-50:-26),u.Ta.push([Q,P,O,v[3],v[0],v[1],v[2],v[3]]);u.nr=m[5];u.nr&&M.push(u.nr);u.Dr=m[4];u.gi=m[9];u.O1=m[10];u.If=E;u.Pt=N;a.ga||(a.ga=[]); a.ga.push(u)}a.Yd||(a.Yd={},a.Yd.Ze=M)}w===k[k.length-1]&&(a.status="loaded",a.La=a.Ea=!0)}}var d=this,e="3D"==a.Rk?0:-3,f=a.Bb,h=a.bd,k=a.ga,l=a.NO,m=a.nb,n=a.BP,p=a.MA,q=a.Ke,r=this.w,s=this.l.Y,u=p[0].split("-");1===u.length&&(u=p[0].split("_"));a=parseInt(u[1]);var v=parseInt(u[2]),x=parseInt(u[0]),t=this,w=u[3],y=h?m:1,m=Math.pow(2,x);10>x&&(a<=l&&c(f,a+m,v,x),a>=m-l&&c(f,a-m,v,x));c(f,a,v,x)}}},function(a){a||(g.ck.jma=!0)})}})();(function(){if(!g.ed){g.ed=g.dJ();var a=g.a.jB({h:"on",be:"hasEvents",I:"off",DH:"offByContext",q:"emit",Wh:"clearEvents"});g.ed.Jf(null,function(){return{vla:function(){var a=this;this.Kq=[];this.Lq={};if("undefined"!==typeof worker)for(var c=0;10>c;c++){var d=new Worker(this.eha);d.status={index:c,y0:!0,WH:!1,CI:0};d.addEventListener("message",function(c){var d=c.data;c=c.target;d.ping&&200===d.status?(c.status.WH=!0,a.Kq.filter(function(a){return a.status.WH}).length===a.Kq.length&&(a.Kq.WH=!0)): d.result&&a.Ooa(c,d)});this.Kq.push(d);d.postMessage({cmd:"ping",ts:(new Date).getTime()})}},Ooa:function(a,c){var d=c.parentTaskId,e=c.taskId,f=this.Lq[d],h=!1;f[e].data=c;f[e].index=a.status.index;for(var k=0,l=f.length;k<l;k++){var m=f[k];if(m&&m.zc)if(m.data){var n=m.data;m.zc(n.err,n.result,m.bJ);m.bJ.wk&&(h=!0);m.data=null;m.WA=!0;m.zc=null;m.bJ=null;f[k]=null}else if(!m.WA)break}h&&e===f.length-1&&!f[e]&&delete this.Lq[d];0===--a.status.CI&&(a.status.y0=!0)},jga:function(a,c,d){var e=a.parentTaskId; this.Kq.sort(function(a,b){return a.status.CI-b.status.CI});void 0===this.Lq[e]&&(this.Lq[e]=[]);this.Lq[e].push({bJ:c,zc:d});c=this.Kq[0];c.status.y0=!1;c.status.CI++;a.taskId=this.Lq[e].length-1;a.ts=(new Date).getTime();a.workerIndex=c.status.index;c.postMessage(a)},D1:function(a,c){var d=this;if(3<this.Ss||this.disabled)return this.bh(a,c);var e=a.Bb,f=a.zd,h=a.pe,k=a.Vp,l=a.Gla,m=a.ga;if(h&&this.iA())this.al(e,c);else if(!this.q0(a,function(a,b){var c=a.Bb,d=a.Vp;b.reverse().forEach(function(a){a= c.indexOf(a);-1!==a&&d.splice(a,1)})},c)){var n=[(new Date).getTime(),this.ta.length+1&65535,h?1:0,(""+Math.random()).slice(2,7)].join("-");this.Jo[n]={Bb:e,zd:f,D:a,zc:c,pe:h};h||(this.lk[n]=1);var e={command:"tiles",reqId:n,payload:{t:k,opt:f,cs:{level:f,flds:m.join(","),v:l?"3":"2"}}},p=this.send(e);this.fH()||setTimeout(function(){d.fH()||(d.Ss?d.Ss++:d.Ss=1,d.Wia(p)&&(delete d.Jo[n],delete d.lk[n],d.bh(a,c)))},300);this.h("tiles",this.VB,this);this.h("ack",this.UB,this);this.h("disable",this.SB, this)}},Tga:function(a){this.e1()&&this.send(a)},SB:function(){this.disabled=!0;this.close();for(var a in this.Jo)this.Jo.hasOwnProperty(a)&&this.tU(a)},tU:function(a){var c=this.Jo[a];c&&(this.al(c.Bb,c.zc),delete this.Jo[a],delete this.lk[a])},UB:function(a){var c=a.reqId,d=this.Jo[c];d&&(a.content.status?d.zc&&(d.zc(null,{hc:d.D.hc,Pfa:!0,zxa:!0},{xp:!1,wk:!0}),delete this.Jo[c],delete this.lk[c]):this.tU(c))},VB:function(a){var c=this.Jo[a.reqId];if(c)if(c.pe){a=a.content.data;for(var d=0,e=a.length;d< e;d++)if(a[d]){var f=a[d];if(f.length){var h=f[0].split("-").slice(0,-1).join("/");this.rj[h]?this.rj[h].push(f):(this.rj[h]=[f],this.vs++);this.rj[h].length===c.D.ga.length&&(this.rj[h].TV=!0)}}}else this.Cr(this.extend({Ck:!1},c.D,{VC:a.content.data,zd:a.content.opt}),c.zc)},moa:function(a,c,d){var e=c.Ck,f=c.hh;c.kt||(c.kt=[]);if(a.length){for(var h=function(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:p;a||(q.Bb=c.Bb.filter(function(a){return"loaded"===a.status}).map(function(a){return{key:a.key, status:a.status}}),q.data=b.data,q.Ck=e.wk,q.Ck&&(q.kt=c.kt,c.kt=null));d(a,q,e)},k=this.extend({},f),l=0,m=a.length;l<m;l++){var n=a[l];n&&c.kt.push({oi:n.oi,dd:n.dd,Oa:JSON.stringify(n)})}var p={xp:!e,wk:!!e},q={hc:c.hc,ht:c.ht,kt:[],hf:{Ke:f.Ke,vh:f.vh,vf:f.vf,zd:c.zd}},e=c.mf?"parseDataToWebGL":"parseDataToVector";if(c.mf&&this.Kq&&this.Kq.WH)for(f=0,l=Math.ceil(a.length/15);f<l;f++)m=null,m=f===l-1?p:{xp:!0,wk:!1},k.Cc=a.slice(15*f,15*(f+1)),this.jga({cmd:e,args:[k],parentTaskId:c.hc},m,h);else k.Cc= a,k.Ce=this.Ce,this[e](k,h)}else e&&(this.Lq?(a=this.Lq[c.hc])&&a.length&&a[a.length-1]&&(a[a.length-1].bJ={xp:!1,wk:!0}):d(null,{hc:c.hc,Bb:[],data:null,Ck:e},{xp:!e,wk:!!e}))},Cr:function(a,c){for(var d=a.VC,e=[],f=0,h=d.length;f<h;f++){var k=d[f];k&&(a.mP&&(k=JSON.parse(k)),k["x-vd-v"]?(this.Ke=a.hh.Ke=k["x-vd-v"],this.vh=a.hh.vh=k.tv,this.vf=a.vf=[k.tv||"",k.vdv].join("-"),k.bgc&&(k="#"+k.bgc.substring(2),a.ht!==k&&(a.ht=k))):this.TB(this.extend({},a,{MA:k,Cc:e})))}this.moa(e,a,c)},Uya:function(a){for(var c= 0,d=a.length;c<d;c++){var e=a[c];e.Ko&&(self.$s(e.Ko),delete e.Ko)}}}});g.ed.Jf(null,new Function("\\n    return {\\n      "+a.on+": "+g.gv.h.toString()+",\\n      "+a.hasEvents+": "+g.gv.be.toString()+",\\n      "+a.off+": "+g.gv.I.toString()+",\\n      "+a.offByContext+": "+g.gv.DH.toString()+",\\n      "+a.emit+": "+g.gv.q.toString()+",\\n      "+a.clearEvents+": "+g.gv.Wh.toString()+"\\n    }\\n  "));g.US?g.ed.Jf(null,g.US,function(a){a||(g.ed.J0=!0)}):g.ed.J0=!0}})(); ')
_jsload_('overlay', 'g.ya.xc=g.ya.xe.extend({r:function(a,b){var c=a.length;this.of=Array(c);for(var d,e,f=0;f<c;f+=1)if(d=a[f],e=new g.ya.IS(d),this.of[f]=e,!b)if(0===f){if(0===d.length)break;e.mp(d)||d.reverse()}else 0!==d.length&&e.mp(d)&&d.reverse()},jd:function(){if(0===this.of.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.cg){for(var a=this.of[0].jd(),b=1;b<this.of.length;b+=1){var c=this.of[b].jd();g.H.AZ(a,c)||g.H.extend(a,c)}this.cg=a}return this.cg},V_:function(){return this.of},Uwa:function(){for(var a= 0;a<this.of.length;a+=1);},Zh:function(){return g.ya.ye.sD},Jd:function(a){for(var b=this.of,c,d=0,e=b.length;d<e&&(c=b[d].Jd(a),0<d&&(c=!c),c);d+=1);return c},Nha:function(a){for(var b=this.of,c,d=[],e=0,f=b.length;e<f;e+=1)(c=b[e].mp(b[e].ta))?d.length&&d[d.length-1].push(e):d.push([e]);e=0;for(f=d.length;e<f;e+=1){c=!1;for(var h=0,k=d[e].length;h<k&&(c=b[d[e][h]].Jd(a),0<h&&(c=!c),c);h+=1);if(c)return!0}}});g.ya.mv=g.ya.xe.extend({r:function(a){var b=a.length;this.Ef=Array(b);for(var c=0;c<b;c+=1){var d=new g.ya.xc(a[c]);this.Ef[c]=d}},jd:function(){if(!this.cg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.Ef,c=0,d=b.length;c<d;c+=1)g.H.extend(a,b[c].jd());this.cg=a}return this.cg},kO:function(){return this.ta},Zh:function(){return g.ya.ye.pD},x_:function(){return this.Ef},Jd:function(a){for(var b=!1,c=0,d=this.Ef.length;c<d;c+=1)if(this.Ef[c].Jd(a)){b=!0;break}return b}});g.ya.fq=g.ya.xe.extend({r:function(a){this.ta=a},jd:function(){if(!this.cg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.ta.length;b<c;b+=1)g.H.nG(a,this.ta[b]);this.cg=a}return this.cg},kO:function(){return this.ta},Zh:function(){return g.ya.ye.iJ},Tja:function(){return this.ta.length},Ow:function(a){return g.sd.Xq(a,this.ta)}});g.ya.IS=g.ya.fq.extend({Zh:function(){return g.ya.ye.HS},mp:g.sd.mp,Jd:function(a){return g.sd.Jd(a,this.ta)}});g.ya.lv=g.ya.xe.extend({r:function(a){var b=a.length;this.ta=a;this.Ef=Array(b);for(var c=0;c<b;c+=1){var d=new g.ya.fq(a[c]);this.Ef[c]=d}},x_:function(){return this.Ef},jd:function(){if(!this.cg){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.Ef,c=0,d=b.length;c<d;c+=1)g.H.extend(a,b[c].jd());this.cg=a}return this.cg},kO:function(){return this.ta},Zh:function(){return g.ya.ye.nJ},Tja:function(){return this.ta.length},Ow:function(a){for(var b=Infinity,c=0,d=this.Ef.length;c<d;c+=1)b=Math.min(b, this.Ef[c].Ow(a));return b}});g.A.Tb=g.A.Jh.extend({r:function(a,b){arguments.callee.ma.apply(this,arguments);this.HM=a;this.W("options",a);this.W("geodesic",a);this.W("path",a);this.W("noSelect",a);this.it();this.W("display",b);b.h("zoomend",this.nn,this)},Qo:function(){if("3D"==this.map.C.view.type){var a=this.M;a&&(a=a.lc())&&(delete a.Oa,delete a.Kw)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},zr:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),b= a.Nd(b),d=[],e,f,h;e=0;for(f=c.length;e<f;e+=1)h=this.map.Vb(c[e]).add(b),d.push(this.map.Ee(h));0<d.length&&this.set("path",d);if(this.VL&&0<this.VL.length)for(e=0,c=this.VL.length;e<c;e+=1)this.VL[e].zr(a);this.HM.q("movepoly",{Kx:b})},IB:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.HM.q("change",{type:"change",target:this.HM})},xz:function(a){this.get("options");return this.Haa()?this.x$(a):this.GK(a)},Haa:function(){var a=this.get("options");return a&& !!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight},x$:function(a){if(!a||!a.length)return[];var b,c=[],d,e,f=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);f.push(this.HK(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.HK(a[d]),b=Math.round(Math.abs(h[0]-f[f.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].R-a[d].R))),"3D"==this.map.C.view.type&&(b=Math.round(b/1.2)),b=g.T.ika(a[d-1],a[d],b), c.push.apply(c,b),f.push.apply(f,this.GK(b)),c.push(a[d]),f.push(h);return f},KF:function(a){var b=[],c=[],d,e,f,h,k,l,m=a.lc();m instanceof g.ya.fq?l=[m]:m instanceof g.ya.lv&&(l=m.Ef);m=[];a=a.Xa.rotation;b=this.map.get("size");d=Math.PI*a/180;a=(Math.abs(b.width*Math.cos(d))+Math.abs(b.height*Math.sin(d)))/2;var n=(Math.abs(b.width*Math.sin(d))+Math.abs(b.height*Math.cos(d)))/2;d=0;for(e=l.length;d<e;d+=1)if(f=l[d].ta,f.length)for(h=0,k=f.length;h<k;h+=1)if(b=f[h],b=this.Of(b),b[0]=Math.round(b[0]+ a),b[1]=Math.round(b[1]+n),0===h)c[0]=NaN,c[1]=NaN,m.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])m.push("L"+b[0]+" "+b[1]),c[0]=b[0],c[1]=b[1];return m},it:function(){if(this.map&&!this.M){var a=this.map,b=this.get("path"),b=this.M=new g.Gh({BK:this.Ub.zE,name:"polyline-"+g.a.Ab(this),zIndex:this.get("options").zIndex||1,map:a,ea:new g.ya.fq(this.xz(b)),style:this.get("options")});b.wq=this;this.W("resolution",a);this.W("center",a);this.W("coords",b);this.W("style",b);b.Ie("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "), this)}},pathChanged:function(){this.Qo();var a=this.M,b=this.get("path");a&&(this.set("coords",this.xz(b)),a.eg=!0,"c"!==this.map.get("overlayRender")&&a.Xa?(b=this.KF(a),g.l.Rn||b.push("e"),b=b.join(" "),0===b.length&&a.Xa?(a.Xa.Kf.parentNode.removeChild(a.Xa.Kf),a.Xa.Rb.parentNode&&a.Xa.Rb.parentNode.removeChild(a.Xa.Rb),a.Xa=null):g.l.Rn?(a.Xa.Kf.setAttribute("d",b),a.Xa.Rb&&a.Xa.Rb.setAttribute("d",b)):(a.Xa.Kf.path=b,a.Xa.Rb&&(a.Xa.Rb.path=b))):this.set("display"))},nn:function(){},visibleChanged:function(){this.M&& (this.M.Xa?this.get("visible")?(this.M.Xa.Kf.style.display="block",this.M.Xa.Rb&&(this.M.Xa.Rb.style.display="block")):(this.M.Xa.Kf.style.display="none",this.M.Xa.Rb&&(this.M.Xa.Rb.style.display="none")):this.set("display"))},optionsChanged:function(){this.Qo();this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.ar(),this.M.Xa&&(this.M.Xa.Kf.parentNode&&this.M.Xa.Kf.parentNode.removeChild(this.M.Xa.Kf),this.M.Xa.Rb&&this.M.Xa.Rb.parentNode&&this.M.Xa.Rb.parentNode.removeChild(this.M.Xa.Rb))); this.set("display")}});g.A.Fy=g.A.Tb.extend({r:function(a,b){this.fga=a;arguments.callee.ma.apply(this,arguments);this.W("tolerance",a);b.h("zoomend",this.nn,this)},GK:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return g.dv.H_(a,this.map.Oi,b,this.fga.D)},toleranceChanged:function(){this.pathChanged()},nn:function(){this.pathChanged()}});g.A.xc=g.A.Jh.extend({r:function(a,b){arguments.callee.ma.apply(this,arguments);this.CF=a;this.W("options",a);this.W("path",a);this.it();this.W("display",b)},Qo:function(){if("3D"==this.map.C.view.type){var a=this.M;a&&(a=a.lc().get("rings"))&&g.a.isArray(a)&&a.forEach(function(a){delete a.Oa;delete a.Kw})}},deltaPosChanged:function(){this.set("display")},zr:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.Nd(b);var b=[],d,e;c.length&&c[0]instanceof g.T&&(c=[c],e=!0);for(var f= 0,h=c.length;f<h;f+=1){for(var k=c[f],l=[],m=0,n=k.length;m<n;m+=1)d=this.map.Vb(k[m]).add(a),l.push(this.map.Ee(d));b.push(l)}this.CF.q("movepoly",{Kx:a});0<b.length&&this.set("path",e?b[0]:b)},IB:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.CF.q("movepoly",{Kx:c});this.CF.q("change",{type:"change",target:this.CF})},xz:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a.length&&a[0]instanceof g.T&&(a=[a]);for(var b,c,d=[],e, f=this.map,h=0;h<a.length;h+=1){var k=a[h];e=[];b=0;for(c=k.length;b<c;b+=1){var l=f.Vb(k[b]);e.push([l.x,l.y])}d.push(e)}return d},it:function(){if(this.map&&!this.M){var a=this.map,b=this.get("path"),b=this.M=new g.Gh({BK:this.Ub.zE,name:"polygon-"+g.a.Ab(this),zIndex:this.get("options").zIndex||1,map:a,ea:new g.ya.xc(this.xz(b)),style:this.get("options")});b.wq=this;this.W("resolution",a);this.W("center",a);this.W("coords",b);this.W("style",b);b.Ie(["visible","zIndex","strokeWeight","deltaPos"], this)}},pathChanged:function(){var a=this.M,b=this.get("path");this.Qo();a&&(this.set("coords",this.xz(b)),a.eg=!0,"c"!==this.map.get("overlayRender")&&a.ca?(b=this.LF(a),0===b.length?(a.ca.parentNode.removeChild(a.ca),a.ca=null):g.l.Rn?a.ca.setAttribute("d",b.join(" ")):(b.push("e"),a.ca.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight},visibleChanged:function(){this.M&&(this.M.ca?this.get("visible")?this.M.ca.style.display="block":this.M.ca.style.display= "none":this.set("display"))},optionsChanged:function(){this.Qo();this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.ar());this.set("display")},LF:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,f,h,k,l,m,n=a.ca.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width*Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.lc();a instanceof g.ya.xc?d=[a]:a instanceof g.ya.mv&&(d=a.Ef);var q= [];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],f=b.of,h=f.length,0<h)for(var r=0;r<h;r+=1){var s;k=f[r].ta;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.Of(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,s=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;s&&q.push("L"+s[0]+" "+s[1])}return q}});g.A.Mg=g.A.Jh.extend({r:function(a,b){arguments.callee.ma.apply(this,arguments);this.W("center",a);this.W("draggable",a);this.W("unit",a,!0);this.W("radius",a);this.W("options",a);this.it();this.W("display",b)},zr:function(a){var b=this.get("center");a=a.Nd(Math.pow(2,20-this.map.get("zoom")));var c=this.map.Vb(b).add(a);b instanceof g.T?this.set("center",this.map.Ee(c)):this.set("center",c);this.Ub.q("movepoly",{Kx:a})},IB:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0], c.y+a[1]]);this.Ub.q("change",{type:"change",target:this.Ub})},it:function(){if(this.map&&!this.M){var a=this.map,b=a.Vb(this.get("center")),c="px"===this.get("unit"),b=this.M=new g.Gh({Gz:!0,BK:this.Ub.zE,name:"circle-"+g.a.Ab(this),zIndex:this.get("options").zIndex||1,map:a,ea:new g.ya.kg([b.x,b.y]),style:this.get("options")});b.Vt=c;b.wq=this;this.W("resolution",a);this.W("coords",b);this.W("style",b);b.W("visible",this,!0);b.Ie("radius center unit resolution zIndex strokeWeight deltaPos".split(" "), this)}},Qo:function(){if("3D"==this.map.C.view.type){var a=this.M;a&&(a=a.lc())&&(delete a.Oa,delete a.Kw,delete a.z5)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.M,b=this.map.Vb(this.get("center"));a&&(a.lc().ta=[b.x,b.y],this.Qo(),this.set("coords",[b.x,b.y]),this.eg=!0,a.ca?this.i3():this.set("display"))},visibleChanged:function(){this.M&&(this.M.ca?this.get("visible")?this.M.ca.style.display= "block":this.M.ca.style.display="none":this.set("display"))},optionsChanged:function(){this.Qo();this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.ar(),this.M.eg=!0,this.set("display"))},TM:function(a){var b=[],c=[],d,c=a.lc();c instanceof g.ya.kg&&(d=[c]);var c=this.map.C.Oi.gp(Math.floor(this.map.get("zoom"))),e=a.ca.rotation,b=this.map.get("size"),f=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(f))+Math.abs(b.height*Math.sin(f)))/2,f=(Math.abs(b.width*Math.sin(f))+ Math.abs(b.height*Math.cos(f)))/2,b=this.Of(d[0].ta);b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+f);a=a.get("remain")?5.23:a.Vt?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").P/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},i3:function(){var a=this.M,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.ca)if(g.l.Rn)b=this.TM(a),a.ca.setAttribute("d",b);else{b=this.map.C.Oi.gp(Math.floor(this.map.get("zoom")));b=a.Vt?this.get("radius"): this.get("radius")/(b*Math.cos(Math.PI*this.get("center").P/180));a.ca.style.width=Math.round(2*b);a.ca.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.Of(a.lc().ta);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.ca.style.top=Math.round(e[1]-b);a.ca.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.M,b=this.get("radius");a&&(this.Qo(),a.style.radius=b,a.eg=!0,a.q("rad",{target:a,Kk:b}),this.i3())}}); ')
_jsload_('wgl', 'g.l.Pp&&(g.C5=function(a){function b(a,b,c,e,f,k,h){var l=a.Oa;c=[];e=a.Sj;var m=null,n=null,p;a.Oa=[];k=k&&16<b;for(var v=[],x=[],t=[],J=1,O=l.length;J<O;J+=1){var Z=l[J],R=Z[1].split("&"),m=q(w?w:R[0]),n=q(R[4]);p=Z[2];var X=Z[0],S=Z[3]*Math.pow(2,2)*h,V=Z[4],aa={},T=Z[5],Z=[];if(T&&T.length)for(var Y=0,W=T.length;Y<W;Y+=1){var U=T[Y].split("-"),R=U[1].split("^");Z[U[0]]=R;for(var U=0,ba=R.length;U<ba;U+=1)-1===d(c,R[U])&&c.push(R[U])}if(V&&V.length)for(T=0,W=V.length;T<W;T+=1){U=V[T].split("-"); ba=parseInt(U[0]);aa[ba]={};for(var R=1,fa=U.length;R<fa;R+=1)aa[ba][parseInt(U[R])]=!0}T=0;for(V=X.length;T<V;T+=1){R=X[T];y||(v=[],t=[],x=[]);for(var R=s(R,u,b),W=r(R,e,f,!0),R=W[1],U=[],Y=fa=ba=0,ta=R.length-1;Y<ta;Y+=1){var ea=R[Y],la=R[Y+1],ba=ba+ea[0],fa=fa+la[1];if(!aa[T]||!aa[T][Y])if(k){var na=la[0]-ea[0],ja=la[1]-ea[1],va=5E3+na+(5E3+ja)/1E4,ja=Math.sqrt(Math.pow(na,2)+Math.pow(ja,2)),na=Math.round(S/64),ja=Math.ceil(ja/64);na?x.push(0,0,ja,na,0,na,0,0,ja,0,ja,na):x.push(-1,-1,-1,-1,-1, -1,-1,-1,-1,-1,-1,-1);v.push(ea[0],ea[1],-S,va);v.push(la[0],la[1],0,va);v.push(ea[0],ea[1],0,va);v.push(ea[0],ea[1],-S,va);v.push(la[0],la[1],-S,va);v.push(la[0],la[1],0,va)}else t.push(ea[0],ea[1],0,-1,la[0],la[1],0,-1);U.push([ea[0],ea[1]])}Y=R.length-1;ba=[ba/Y+215440491,fa/Y+106744817];U=z.Tj(k?U:R,[],0,1);fa=0;for(Y=U.length;fa<Y;fa+=1)for(R=0;3>R;R+=1)ta=-S,k||(ta=0),x.push(-1,-1),v.push(U[fa][R][0],U[fa][R][1],ta,0);!y&&v.length&&(R=[m,n,p],W=[new Float32Array(v),new Float32Array(x),new Float32Array(t), R,W[1],ba],Z[T]&&(W.Yka=Z[T]),a.Oa.push(W))}}y&&v.length&&(b=256*Math.pow(2,20-e.z),ba=[e.x*b+128,e.y*b+128],W=[new Float32Array(v),new Float32Array(x),new Float32Array(t),[m,n,p],null,ba],a.Oa.push(W));a.Gm=c;return a}function c(a,b,c,e,f,k){c=a.Oa;e=[];for(var h=a.Sj,l=null,m=null,n={},p=1,v=c.length;p<v;p+=1){var x=c[p],t=x[1].split("&"),l=q(w?w:t[0]),m=q(t[2]),y=t[0]+t[2];n[y]||(n[y]={e5:[],G3:[],bc:[],vg:[],UN:l,borderColor:m,kc:x[2]});var l=n[y].e5,m=n[y].G3,t=n[y].bc,y=n[y].vg,O=x[0],Z=x[3]* Math.pow(2,2),R=x[4],X={};if((x=x[5])&&x.length)for(var S=0,V=x.length;S<V;S+=1)for(var aa=x[S].split("-")[1].split("^"),T=0,Y=aa.length;T<Y;T+=1)-1===d(e,aa[T])&&e.push(aa[T]);if(R&&R.length)for(x=0,V=R.length;x<V;x+=1)for(aa=R[x].split("-"),T=parseInt(aa[0]),X[T]={},S=1,Y=aa.length;S<Y;S+=1)X[T][parseInt(aa[S])]=!0;x=0;for(R=O.length;x<R;x+=1){for(var W=O[x],W=s(W,u,b),W=r(W,h,f,!0)[1],S=[],V=0,aa=W.length-1;V<aa;V+=1){var T=W[V],Y=W[V+1],U=[T[0]-0*Z,T[1]-0.3*Z],ba=[Y[0]-0*Z,Y[1]-0.3*Z];X[x]&&X[x][V]|| (k?((Y[0]-T[0])*(U[1]-T[1])<(U[0]-T[0])*(Y[1]-T[1])&&(l.push(U[0],U[1],2),l.push(Y[0],Y[1],-1),l.push(T[0],T[1],-1),l.push(U[0],U[1],2),l.push(ba[0],ba[1],2),l.push(Y[0],Y[1],-1),y.push([T,Y,ba,U])),t.push(U[0],U[1],-1,ba[0],ba[1],-1)):t.push(T[0],T[1],-1,Y[0],Y[1],2));S.push([U[0],U[1]])}W.pop();V=z.Tj(k?S:W,[],0,1);y.push(k?S:W);W=0;for(aa=V.length;W<aa;W+=1)for(S=0;3>S;S+=1)m.push(V[W][S][0],V[W][S][1],3)}}a.Oa=[];for(W in n)n.hasOwnProperty(W)&&(t=[n[W].UN,n[W].borderColor,n[W].kc],a.Oa.push([new Float32Array(n[W].e5), new Float32Array(n[W].G3),new Float32Array(n[W].bc),t,n[W].vg]));a.Gm=e;return a}function d(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function e(a,b){for(var c=a.Oa,d=[],e={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"},f=0,k=c.length;f<k;f++){for(var h=[],m=0,n=c[f].length;m<n;m++){var p=[],r=[];l(p,r,c[f][m][1],a.oa,b);p.forEach(function(a,b){h.push([a,r[b]])})}if(h.length){var s=[[],[],{width:0.75* c[f][0][0],borderColor:q(e[f])}];h.forEach(function(a){var b=s[0].length/9;b&&(a[1]=a[1].map(function(a){return a+b}));s[0]=s[0].concat(a[0]);s[1]=s[1].concat(a[1])});s[0]=new Float32Array(s[0]);s[1]=new Uint16Array(s[1]);d.push(s)}}a.Oa=d;return a}function f(a){var b=[],c=[],d=[];a=r(a,{x:0,y:0},1);c.push.apply(c,a[2]);if(2<a[1].length){var e=z.Tj(a[1],[],0);e.length&&(b.push.apply(b,a[0]),d.push.apply(d,e))}return[new Float32Array(b),new Uint16Array(d),{},c]}function h(a,b,c,d,e,f){function h(a){for(var b= 0,c=0,d=a.length;c<d;c++)b+=a[c][0].length/p-1;return b}function l(){za.ba.push(new Float32Array(na));za.Qb.push(new Uint16Array(ja))}function m(){na=[];ja=[];va=[];Ja=Ka=0}function n(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a}for(var p=11,r="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "),s=a.Oa.slice(1),u=s.length-1;0<=u;u--)s[u].I0=u;s.sort(function(a,b){return a[2]>b[2]?1:a.I0>b.I0?1:-1});for(var v={},u=0,t=s.length;u<t;u+=1){var w=s[u],y=w[1].split("&"),z, S,V,aa,T;z=S=V=aa=T=null;var Y,W,U,ba,fa=null,ta=!1;Y=W=U=ba=null;y[1]&&(z=q(y[1]));S=parseInt(y[0]);V=y[2];V!==r[0]&&(V===r[1]?Y="round":V===r[2]?Y="square":0===V.indexOf(r[5])?(fa=!0,U=[3,2]):0===V.indexOf(r[3])?(U=V.substring(5).split(")")[0].split(","),U.forEach(function(a,b){U[b]*=e})):0===V.indexOf(r[4])&&(aa=z,z=y[4]?q(y[4]):[1,1,1,z[3]],U=[12,12],ta=!0,T=3,S=1));y[3]&&y[4]&&3<y.length&&(T=S+parseInt(y[3]),aa=q(y[4]),V=y[5],V!==r[0]&&(V===r[1]?W="round":V===r[2]?W="square":0!==V.indexOf(r[5])&& 0===V.indexOf(r[3])&&(T+=1,ba=V.substring(5).split(")")[0].split(","),ba.forEach(function(a,b){ba[b]*=e}))));if(c){if(U)for(y=U.length-1;0<=y;y-=1)U[y]*=e;if(ba)for(y=ba.length-1;0<=y;y-=1)ba[y]*=e}var ea=[];ea.Gc=0;V=[];var la=[];k(ea,la,V,w[0],a.Sj,b,c,d,e,Y);"app"===x&&(S/=4,T/=4);y=[S,z,U,T,aa,ba,fa,ta,Y,W,w[3],w[4]];w=w[2];v[w]||(v[w]=[]);z=[ea,la,y];f&&z.push(V);v[w].push(z)}var na=void 0,ja=void 0,va=void 0,Ka=void 0,Ja=void 0,za={ba:[],Qb:[],hash:{}};m();for(var Da in v)if(v.hasOwnProperty(Da)){b= v[Da];65535<h(b)+ja[ja.length-1]+10&&(l(),m());c=[];d=za.Qb.length;f=0;for(r=b.length;f<r;f++)s=b[f],u=null,na=na.concat(s[0]),ja=ja.concat(n(s[1],Ka)),u=new Float32Array([d,s[1].length,2*Ja]),c.push(u),Ka+=s[0].length/p,Ja+=s[1].length,s[2].Una=s[3],b[f]=s[2];za.hash[Da]=c;va.push(Da)}l();v.buffer=za;a.Oa=v;return a}function k(a,b,c,d,e,f,k,h,l,m){for(var n=0,p=d.length;n<p;n+=1){var q=a.length/11,v=q+6,x=s(d[n],u,f),t=r(x,e,h);if(1<t[1].length){for(var x=t[0],w=t[2],y=0,t=t[1].length;y<t;y+=1){if(0< y){var z=x[2*y]-x[2*y-2],S=x[2*y+1]-x[2*y-1];a.Gc+=Math.sqrt(z*z+S*S)*(k?l:1)}var z=x[2*y],S=x[2*y+1],V=w[y][0],aa=w[y][1],T,Y;y===t-1?(T=x[2*t-2],Y=x[2*t-1]):(T=x[2*y+2],Y=x[2*y+3]);var W,U;0===y?(W=z,U=S):(W=x[2*y-2],U=x[2*y-1]);if(0!==y){var ba=y===t-1?0:-1;a.push(z,S,V,aa,1,W,U,ba,T,Y,a.Gc);a.push(z,S,V,aa,-1,W,U,ba,T,Y,a.Gc)}else a.push(z,S,V,aa,0,W,U,0,T,Y,a.Gc),a.push(z,S,V,aa,1,W,U,0,T,Y,a.Gc),a.push(z,S,V,aa,1,W,U,1,T,Y,a.Gc),a.push(z,S,V,aa,0,W,U,1,T,Y,a.Gc),a.push(z,S,V,aa,-1,W,U,1,T,Y, a.Gc),a.push(z,S,V,aa,-1,W,U,0,T,Y,a.Gc),m&&(b.push(q+2,q+0,q+3),b.push(q+2,q+1,q+0),b.push(q+3,q+0,q+4),b.push(q+4,q+0,q+5));y!==t-1?(ba=0===y?0:1,a.push(z,S,V,aa,1,W,U,ba,T,Y,a.Gc),a.push(z,S,V,aa,-1,W,U,ba,T,Y,a.Gc)):(a.push(z,S,V,aa,0,W,U,0,T,Y,a.Gc),a.push(z,S,V,aa,1,W,U,0,T,Y,a.Gc),a.push(z,S,V,aa,1,W,U,-1,T,Y,a.Gc),a.push(z,S,V,aa,0,W,U,-1,T,Y,a.Gc),a.push(z,S,V,aa,-1,W,U,-1,T,Y,a.Gc),a.push(z,S,V,aa,-1,W,U,0,T,Y,a.Gc));y!==t-1?(b.push(v+4*y,v+4*y+3,v+4*y+1),b.push(v+4*y,v+4*y+2,v+4*y+3)): m&&(z=v+4*(t-1),b.push(z+1,z+2,z+0),b.push(z+2,z+3,z+0),b.push(z+0,z+4,z+5),b.push(z+0,z+3,z+4))}c.push(w)}}}function l(a,b,c,d,e){for(var f=[],k=0,h=c.length;k<h;k+=1){var l=[],m=[],n=s(c[k]),p=r(n,d,e);f.push(p[2]);if(1<p[1].length){var q=p[1].length;p[1].forEach(function(a,b,c){var d=c[b-1];c=c[b+1];0===b?d=a:b===q-1&&(c=a);l.push(a[0],a[1],p[2][b][0],p[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],p[2][b][0],p[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=q-1?(m.push(2*(b-1)+1,2* b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function m(a,b,c,d,e,f,k,h){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,p=r(s(d[l],u,f),e,k);if(2<p[1].length&&(n=z.Tj(p[1],[],n),n.length&&(a.push.apply(a,p[0]),b.push.apply(b,n),c.push(p[2]),h)))for(var n=0,q=p[2].length;n<q;n+=1){var v=p[2][n][0]/512,x=p[2][n][1]/512;1==e.x%2&&(v+=0.5);1==e.y%2&&(x+=0.5);h.push(v,x)}}}function n(a,b,c,d){function e(a,b){for(var c=0,d=a.length;c<d;c++)a[c]+=b;return a} var f=a.Oa,k=[],h=[],l=[],n=[];p(a,h,l,c);for(var r=[[[0,0],[255,0],[255,255],[0,255]]],s=[[0,0],[255,0],[0,255],[255,255]],u=a.Sj,v=0,x=s.length;v<x;v+=1){var t=s[v][0]/512,w=s[v][1]/512;1==u.x%2&&(t+=0.5);1==u.y%2&&(w+=0.5);n.push(t,w)}k.push([h,l,q("ff"+a.xw.substr(1)),"regions:land",r,n]);f.sort(function(a,b){return"string"===typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});s=1;for(u=f.length;s<u;s+=1)v=f[s],h=[],l=[],r=[],n=[],x=q(v[1].split("&")[0]),m(h,l,r,v[0],a.Sj,b,c,n),h= [h,l,x,v[3],null,n],d&&(h[4]=r),k.push(h);b={oo:[],ue:[],ba:[],Qb:[],Xj:[]};f=d=c=0;for(r=k.length;f<r;f++)h=k[f],b.ba.push.apply(b.ba,h[0]),b.Qb.push.apply(b.Qb,e(h[1],c)),b.Xj.push.apply(b.Xj,h[5]),b.ue.push([h[2],h[3]]),b.oo.push([h[1].length,2*d]),d+=h[1].length,c+=h[0].length/2,delete h[0],delete h[1],delete h[5];b.ba=new Float32Array(b.ba);b.Qb=new Uint16Array(b.Qb);b.Xj=new Float32Array(b.Xj);k.buffer=b;a.Oa=k;return a}function p(a,b,c,d){var e=a.Sj;a=256*e.x*d-215440491;e=256*e.y*d-106744817; b.push(a,e);var f=256*d;d=a+f;b.push(d,e);e+=f;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function q(a){for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16)/255);b.push(b.shift());return b}function r(a,b,c,d){var e=0,f=0,e=256*b.x,f=256*b.y;b=[];for(var k=[],h=[],l=0,m=a.length;l<m;l+=2){var n=(e+a[l])*c-215440491,p=(f+a[l+1])*c-106744817,r=h.length;if(d||0===b.length)h.push(n),h.push(p),b.push([n,p]),k.push([a[l],a[l+1]]);else if(n!==h[r-2]||p!==h[r-1])n===h[r-2]&&n===h[r-4]?(h[r- 1]=p,b[b.length-1][1]=p,k[b.length-1][1]=a[l+1]):p===h[r-1]&&p===h[r-3]?(h[r-2]=n,b[b.length-1][0]=n,k[b.length-1][0]=a[l]):(h.push(n),h.push(p),b.push([n,p]),k.push([a[l],a[l+1]]))}return[h,b,k]}function s(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,f;"v5"<b?(e=d.length,f=512):(e=27,d=d.substr(0,27),f=333);var k,h,l,m,n;h=[];l=NaN;m=0;for(n=a.length;m<n;m++)k=a[m],k=d.indexOf(k),isNaN(l)?l=k*e:(k=l+k-f,18===c&&"v5"<b&&(k/=4),h.push(k),l=NaN);return h}var u, v=Number.EPSILON||2E-16,x,t=!1,w=null,y=!0,z={qg:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d][0]*a[e][1]-a[e][0]*a[d][1];return 0.5*c},JI:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],f=[],k,h,l;if(0<z.qg(a))for(h=0;h<c;h++)e[h]=h;else for(h=0;h<c;h++)e[h]=c-1-h;var m=2*c;for(h=c-1;2<c&&!(0>=m--);){k=h;c<=k&&(k=0);h=k+1;c<=h&&(h=0);l=h+1;c<=l&&(l=0);var n;a:{var p=n=void 0,r=void 0,s=void 0,q=void 0,u=void 0,x=void 0,t=void 0,w=void 0,p=a[e[k]][0], r=a[e[k]][1],s=a[e[h]][0],q=a[e[h]][1],u=a[e[l]][0],x=a[e[l]][1];if(v>(s-p)*(x-r)-(q-r)*(u-p))n=!1;else{var y=void 0,V=void 0,aa=void 0,T=void 0,Y=void 0,W=void 0,U=void 0,ba=void 0,fa=void 0,ta=void 0,fa=ba=U=w=t=void 0,y=u-s,V=x-q,aa=p-u,T=r-x,Y=s-p,W=q-r;for(n=0;n<c;n++)if(t=a[e[n]][0],w=a[e[n]][1],!(t===p&&w===r||t===s&&w===q||t===u&&w===x)&&(U=t-p,ba=w-r,fa=t-s,ta=w-q,t-=u,w-=x,fa=y*ta-V*fa,U=Y*ba-W*U,ba=aa*w-T*t,fa>=-v&&ba>=-v&&U>=-v)){n=!1;break a}n=!0}}if(n){d.push([a[e[k]],a[e[h]],a[e[l]]]); f.push([e[k],e[h],e[l]]);k=h;for(l=h+1;l<c;k++,l++)e[k]=e[l];c--;m=2*c}}return b?f:d}}(),Tj:function(a,b,c,d){var e,f,k,h={};b=0;for(e=a.length;b<e;b++)k=a[b][0]+":"+a[b][1],h[k]=b;a=z.JI(a,!1);if(!a)return[];if(d)return a;var l=[];b=0;for(e=a.length;b<e;b++)for(f=a[b],d=0;3>d;d++)k=f[d][0]+":"+f[d][1],k=h[k],l.push(k+c);return l},rP:function(a){return 0>z.qg(a)}};return{parseDataToWebGL:function(d,e){function f(a,b){var c=[];if("road"===b){if(a.Oa&&a.Oa.buffer)for(var d=a.Oa.buffer,e=0,k=d.ba.length;e< k;e++)c.push(d.ba[e].buffer,d.Qb[e].buffer)}else if("region"===b)a.Oa&&a.Oa.buffer&&(d=a.Oa.buffer,c.push(d.Qb.buffer,d.Xj.buffer,d.ba.buffer));else if("building"===b&&a.Oa)for(d=0,e=a.Oa.length;d<e;d++)k=a.Oa[d],c.push(k[0].buffer,k[1].buffer),k[2].byteLength&&c.push(k[2].buffer);c.length&&this.$s(c)}function k(a){var b=a.Oa;r&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b[b.length-1],d=r[c];b[1]=d.browserStyle[d.levelStyleMapping[m]];"road"===a.dd&&(b[1]=b[1][0],b[4]= d,b[4].id=c)}})}u=d.Ke;t=d.lP;x=d.mode;y=d.Mf;var l=t?b:c,m=d.wx,p=d.Fp,r=null;w=d.Gq;var s=d.Y,q=[],v=Math.pow(2,20-m),z=!!d.Ac;void 0!==d.vw&&(r=d.Ce[d.vw].stylemaps);for(var Q=0,P=d.Cc.length;Q<P;Q+=1){var J=d.Cc[Q],O=J.dd,Z=null;k(J);switch(O){case "region":Z=n(J,m,v,z);break;case "road":Z=h(J,m,p,v,d.E3,z);break;case "building":Z=l(J,m,p,s,v,d.YM,d.jx)}a&&f.call(self.$s?self:this,Z,O);Z&&q.push(Z)}delete d.Ce;d.Cc=q;e(null,{data:d})},soa:function(a,b){for(var c=a.Cc,d=Math.pow(2,20-a.zd),f=[], k=0,h=c.length;k<h;k++)f.push(e(c[k],d));a.Cc=f;b(null,{data:a})},I2:function(a,b){var c=a.ju.reduce(function(a,b){return a.concat(b)},[]),c=f(c);b(null,{data:c})},D2:function(a,b){var c=a.gb,d=a.Kk,e=0,f=Math.PI/180*6,k=[],h=[];k.push(c[0],c[1]);for(var l=0;60>l;l++)k.push(c[0]+d*Math.cos(e),c[1]+d*Math.sin(e)),e+=f,0<l&&h.push(0,l,l+1),59==l&&h.push(0,l+1,1);b(null,{data:[k,h]})},Tya:function(){}}},g.ed&&g.ed.Jf(null,g.C5));(function(){function a(){function a(b,c,d,e,f,k){var l=[0,0,0,0,0],m=d.slice(0,4).concat(l),r=[],q=Math.PI/180*6,A=void 0,H=void 0,A=d.slice(0,2),G=n(e),I=n(f),H=s.normalize((new h(G)).eh(new h(A))),K=s.normalize((new h(I)).eh(new h(A)));s.qP(H,k)?(A=s.aH(H),H=s.aH(K)):(A=s.aH(K),H=s.aH(H),k=[I,G],G=k[0],I=k[1],f=[f,e],e=f[0],f=f[1]);G=Math.ceil(Math.abs(H-A)/q);30<=G&&(G=60-G);for(k=0;k<G;k++)0===k?(m.push.apply(m,e.slice(0,4)),m.push.apply(m,l)):(I=(k*q+A)%(2*Math.PI),m.push.apply(m,d.slice(0,2).concat([0, 0])),m.push(1*Math.cos(I),1*Math.sin(I),0,0,0)),0<k&&r.push(0,k,k+1);m.push.apply(m,f.slice(0,4));m.push.apply(m,l);r.push(0,G,G+1);var N=b.length/p;b.push.apply(b,m);c.push.apply(c,r.map(function(a){return a+N}));return m.length/p}function c(c,d,e,f,k,l){function r(a,b,c,d,e){var f=void 0;a.lG(b)||s.$0(a,b)?f=b:c&&d&&e?f=a:c&&!d&&e?f=b:c||d||e?c||!d||e?(f=s.normalize(a.Kj(b)),G=s.cos(f,a),f=f.Qw(G)):f=a:f=b;return f}function q(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(H, 0,0),l.push(a[2]);if(void 0===c||!1===c)d.push(a[0],a[1]),d.push(b.y,-b.x,0,0),d.push(H,0,0),l.push(a[2])}function F(a,b){var c=a*p,e=c+p,f=e+p,k=f+p,l=m;I?(f=n(d.slice(e,f)),c=n(d.slice(c,e)),c=s.normalize((new h(f)).eh(new h(c))),c=Math.abs(s.cos(b,c)/s.sin(b,c)*2),d[e+l]=-c,d[k+l]=c):(k=n(d.slice(c,e)),e=n(d.slice(e,f)),e=s.normalize((new h(k)).eh(new h(e))),e=Math.abs(s.cos(e,b)/s.sin(e,b)*2),d[c+l]=-e,d[f+l]=e)}var B=c.length,A=0,H=0,G=void 0,I=void 0;k&&(f="bevel");for(var K=0,N=c.length;K< N;K+=1){var M=c[K-1],L=c[K],E=c[K+1],Q=void 0;M&&(H+=s.Kd(L,M));if(0===K||K===B-1)0===K?(void 0===E&&(E=L),M=L,Q=s.normalize(new h(E[0]-L[0],E[1]-L[1])),e.push(0,1,2)):(E=L,Q=s.normalize(new h(L[0]-M[0],L[1]-M[1])),E=d.length/p+2,4===E?e.push(3,2,1):e.push(E-3-A,E-1,E-2)),q(L,Q);else{var P=s.normalize(new h(L[0]-M[0],L[1]-M[1])),J=s.normalize(new h(E[0]-L[0],E[1]-L[1])),O=s.normalize(P.multiply(-1).Kj(J)),I=s.qP(O,P),G=s.cos(O,P);q(L,r(P,J,I,!0,!0),!0);q(L,r(P,J,I,!0,!1),!1);q(L,r(P,J,I,!1,!0),!0); q(L,r(P,J,I,!1,!1),!1);E=d.length/p;Q=E-4;M=Q+2;F(Q,P);s.$0(P,J)?e.push(Q,Q+1,Q-2-A):e.push(Q,Q-1-A,Q+1);"miter"==f&&(I?q(L,r(P,J,0,!0,!0),!0):q(L,r(P,J,0,!0,!0),!1),A=1);if("round"===f){J=P=A=void 0;I?(A=d.slice((Q+1)*p,(Q+2)*p),P=d.slice(Q*p,(Q+1)*p),J=d.slice(M*p,(M+1)*p)):(A=d.slice(Q*p,(Q+1)*p),P=d.slice((Q+1)*p,(Q+2)*p),J=d.slice((M+1)*p,(M+2)*p));A=a(d,e,A,P,J,O.multiply(-1));if(l)for(;0<A--;)l.push(L[2]);A=d.length/p-E}e.push(M,M+1,M+2+A);k||"bevel"!=f&&"miter"!=f||(I?e.push(M,Q,Q+1):e.push(M, M-1,M+1),"miter"==f&&(I?e.push(M+2,M-2,M):e.push(M+2,M+1,M-1)))}}}function d(a,b,c,d){function e(a,b){var c=void 0;if(a.lG(b))c=b;else{var c=s.normalize(a.Kj(b)),d=s.cos(c,a);d>Math.sqrt(3)/2&&(d=Math.sqrt(3)/2);c=c.Qw(d)}return c}function f(a,c,e){if(void 0===e||!0===e)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(n,0,0),d.push(a[2]);if(void 0===e||!1===e)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(n,0,0),d.push(a[2])}for(var k=a[0],l=a[a.length-1],n=0,r=void 0;k[0]===l[0]&&k[1]===l[1]&&k!==l;)a.pop(), l=a[a.length-1];a.push(k);a.push(a[1]);a.unshift(l);var q=a.length;a.forEach(function(a,d,k){var l=k[d-1];k=k[d+1];var u=void 0;l&&(n+=s.Kd(a,l));if(0===d||d===q-1)0===d?(u=s.normalize(new h(k[0]-a[0],k[1]-a[1])),c.push(0,1,2)):(u=s.normalize(new h(a[0]-l[0],a[1]-l[1])),d=b.length/p+2,c.push(d-3,d-1,d-2)),f(a,u);else{d=s.normalize(new h(a[0]-l[0],a[1]-l[1]));k=s.normalize(new h(k[0]-a[0],k[1]-a[1]));l=s.normalize(d.multiply(-1).Kj(k));r=s.qP(l,d);f(a,e(d,k),!0);f(a,e(d,k),!1);f(a,e(d,k),!0);f(a,e(d, k),!1);a=b.length/p-4;k=a+2;var u=a*p,t=u+p,z=t+p,D=z+p;d=Math.abs(s.cos(d,l)/s.sin(d,l));l=m;r?(b[u+l]=d,b[t+l]=-d,b[z+l]=-d,b[D+l]=d):(b[u+l]=-d,b[t+l]=d,b[z+l]=d,b[D+l]=-d);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c,d,e){function f(a,b){if(r)for(;0<a--;)r.push(b)}function m(a,b){B.push.apply(B,a.slice(0,k));B.push(b.x,b.y);B.push.apply(B,a.slice(l));B.push.apply(B,a)}var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",r=arguments[4],q=c.length-1,F=d.length,B=[],A=[],H= [d.slice(0,p),d.slice(p,2*p)],G=[d.slice(F-p,F),d.slice(F-2*p,F-p)];"square"===n?(n=s.normalize((new h(c[0])).eh(new h(c[1]))),m(H[0],n),m(H[1],n),n=s.normalize((new h(c[q])).eh(new h(c[q-1]))),m(G[0],n),m(G[1],n),A.push(0,2,3,3,1,0),A.push(6,7,4,4,7,5),r&&(r.push(c[0][2]),r.push(c[q][2]))):"round"===n&&(n=H[0].slice(0,2).concat(0,0,0,0).concat(H[0].slice(l)),H=a(d,e,n,H[0],H[1],s.normalize((new h(c[0])).eh(new h(c[1])))),f(H,c[0][2]),n=G[0].slice(0,2).concat(0,0,0,0).concat(G[0].slice(l)),H=a(d, e,n,G[0],G[1],s.normalize((new h(c[q])).eh(new h(c[q-1])))),f(H,c[q][2]));d.push.apply(d,B);e.push.apply(e,A.map(function(a){return a+F/p}))}function f(a,b){var c=[];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];b&&(d-=r[0],e-=r[1]);var f=c.length-1;if(-1===f)c.push([d,e,a]);else if(d!==c[f][0]||e!==c[f][1]||a!==c[f][2])if(1<=f){var k=s.normalize(new h(d-c[f][0],e-c[f][1])),l=s.normalize(new h(c[f][0]-c[f-1][0],c[f][1]-c[f-1][1]));k.lG(l)&&a===c[f][2]?c[f]=[d,e,a]:c.push([d,e,a])}else c.push([d, e,a])});return c}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);this.x=a;this.y=b}var k,l,m;function n(a){return[a[0]+q*a[2],a[1]+q*a[3]]}var p=9,q=1;k=4;l=6;m=7;var r=[215440491,106744817],s={normalize:function(a){var b=this.length(a);return a.Qw(b)},jf:function(a,b){return a.multiply(b)},Sq:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.Sq(a,b)/(this.length(a)*this.length(b))},cos:function(a, b){return this.jf(a,b)/(this.length(a)*this.length(b))},qP:function(a,b){return 0<this.Sq(a,b)},Kd:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))},$0:function(a,b){return a.multiply(-1).lG(b)},aH:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}};h.prototype={Kj:function(a){return new h(this.x+a.x,this.y+a.y)},eh:function(a){return new h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?new h(this.x*a,this.y*a):this.x*a.x+this.y*a.y}, Qw:function(a){return new h(this.x/a,this.y/a)},lG:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var k=a.lineJoin,k=void 0===k?"bevel":k,h=a.lineCap,h=void 0===h?"butt":h,l=a.Tla,l=void 0===l?!1:l,m=a.ox,n=void 0===m?!1:m,r=a.y2,m=a.Bra,s=void 0===m?!0:m,m=a.Kla,q=[],A=[],H=f(a.ju,void 0===r?!0:r),r=[];l?(d(H,q,A,r),k=q.length,[0,1,2,k/p-1,k/p-2].forEach(function(a){q[a*p+8]=-1})):(c(H,q,A,k,n,r),e(H,q,A,h,r));s&&(q=new Float32Array(q),A=65535<A.length?new Uint32Array(A): new Uint16Array(A));k=[q,A];m&&k.push(r);if(b)b(null,{data:k});else return k}}}g.fS=a();g.Hsa=new g.Uy(a,{lazy:"untilCall"})})();g.Rl={Bla:function(a,b,c){b=g.Rl.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.Ba=b;return!0},createProgram:function(a,b,c){b=g.Rl.E1(a,a.VERTEX_SHADER,b);c=g.Rl.E1(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.bindAttribLocation(d,0,"a_Position");a.linkProgram(d);var e=a.getProgramParameter(d,a.LINK_STATUS);a.deleteShader(c);a.deleteShader(b);return e?d:(console.log("Failed to link program: "+ a.getProgramInfoLog(d)),a.deleteProgram(d),null)},E1:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)},tf:function(a,b,c,d){var e=d;"number"!==typeof d&&(e=d.toString());if(c.qY!==e){var f="uniform"+b;if(2===b.length)a[f].apply(a,[c].concat(d));else a[f](c,d);c.qY=e}},HA:function(a){a.length|| (a=[a]);for(var b=0,c=a.length;b<c;b++)delete a[b].qY}};g.O.Lg.gd=g.O.Wd.ti.extend({ha:[g.qv],r:function(a,b){this.Ii=20;this.nb=Math.min(2,window.devicePixelRatio||1);this.wp=1;arguments.callee.ma.apply(this,arguments);this.W("mapStyle",a.e);this.W("style",a.e);this.$i=this.di=!0;a.e.C.op&&this.yA(a,b);this.$m=0;this.ok={};this.$G()||this.set("reload")},hu:function(){this.sa.forEach(function(a){this.Ff(a)},this);this.na.deleteProgram(this.na.Ba);this.na=null;for(var a in this)this.hasOwnProperty(a)&&g.a.Tqa(a,"u_")&&delete this[a];arguments.callee.ma.apply(this, arguments)},Ff:function(a){if(a.va){if(a.va.region&&a.va.region.length){for(var b=a.va.region.buffer,c=0,d=a.va.region.length;c<d;c+=1){var e=a.va.region[c];e[2]=null;e[4]=null}if(b){this.na.deleteBuffer(b.ba);this.na.deleteBuffer(b.Qb);for(var f in b)b.hasOwnProperty(f)&&(b[f]=null);a.va.region.buffer=null}delete a.va.region}if(a.va.road){for(c in a.va.road)if(a.va.road.hasOwnProperty(c))if("buffer"!==c)delete a.va.road[c];else if(b=a.va.road.buffer){if(b.ba&&b.ba.length)for(d=0,e=b.ba.length;d< e;d++)this.na.deleteBuffer(b.ba[d]),this.na.deleteBuffer(b.Qb[d]);for(f in b)b.hasOwnProperty(f)&&(b[f]=null);a.va.road.buffer=null}delete a.va.road}if(a.va.building){c=0;for(d=a.va.building.length;c<d;c+=1)e=a.va.building[c],this.na.deleteBuffer(e[0]),e[0]=null,e[1]&&this.na.deleteBuffer(e[1]),e[1]=null,this.na.deleteBuffer(e[2]),e[2]=null,e[3]=null,e[4]=null,e[5]=null;delete a.va.building}delete a.va}},o7:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", j6:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.j&&(this.j.La=!1);this.sa.clear();this.Qa&&this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);this.set("display")},Ix:function(a){if(this.j&&a.CP===this.j.hc)for(var b=0,c=a.Cc.length;b<c;b+=1)this.WB(a.Cc[b],a.wx,a.Fp,a.Y)},JQ:function(a){for(var b=this.na,c=a.buffer,d=0,e=a.length;d<e;d+=1){var f=a[d];this.e.Hl&&f[3]&&!this.e.Ac&&(f[2]=this.L.gr(f[2],f[3]),c.ue[d][0]=f[2])}c.ba=this.Dd(b.ARRAY_BUFFER,c.ba);c.Qb=this.Dd(b.ELEMENT_ARRAY_BUFFER,c.Qb)},$Q:function(a){for(var b= this.na,c=a.buffer,d=0,e=a.buffer.ba.length;d<e;d++)c.ba[d]=this.Dd(b.ARRAY_BUFFER,c.ba[d]),c.Qb[d]=this.Dd(b.ELEMENT_ARRAY_BUFFER,c.Qb[d]);if(this.e.Hl&&!this.e.Ac){var b=c.hash,c=null,f;for(f in b)if(b.hasOwnProperty(f))for(d=0,e=a[f].length;d<e;d++)c=a[f][d],c[10]&&(c[1]=this.L.tl(c[1],c[10],1),c[4]=this.L.tl(c[4],c[10],0))}},ZM:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];d.LB=d[0].length/3;d[0]=this.Dd(this.na.ARRAY_BUFFER,d[0]);d.wH=d[1].length/3;d[1]=this.Dd(this.na.ARRAY_BUFFER, d[1]);d.MB=d[2].length/3;d[2]=this.Dd(this.na.ARRAY_BUFFER,d[2]);if(this.e.Hl&&d[3][2]&&!this.e.Ac){var e=this.L.Xw(d[3][0],d[3][1],d[3][2]);d[3][0]=e[0];d[3][1]=e[1]}}},Dd:function(a,b){if(b.length){var c=this.na,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},WB:function(a){var b=a.dd,c=this.sa.get(a.oi);c&&(c.va[b]=a.Oa,"region"===b?this.JQ(a.Oa):"road"===b?this.$Q(a.Oa):"building"===b&&(this.ZM(a.Oa),a.Gm&&a.Gm.length&&!c.Yd&&(c.Yd={},c.Yd.Ze=a.Gm,g.jj&&g.jj.q("vecTileParsed.buildings", {mo:c}))),b===this.j.ga[this.j.ga.length-1]&&(c.Ea=!0,this.set("display")))},Id:function(){if(this.ag&&!this.j.La){var a=this.j;this.e.DB||g.ze.Te.end({key:"rb",index:2,id:this.e.C.id});a.La=!0;a.xd?a.ka("renderComplete"):(a.xd=!0,a.ka("complete"))}},pc:function(a,b){!window.sa&&this.sa&&(window.sa=this.sa);this.es=a.es;this.ao(a,b);this.Id();a.SG||(a.pga=this.ag,this.Ux(a,b),this.qr=this.hb,this.ee&&this.set("display",0))},yj:function(){return this.Qa},RB:function(){g.O.Lg.gd.Qq+=1;this.Qa&&g.F.I(this.Qa, "webglcontextlost",this.RB,this);this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);if(1<g.O.Lg.gd.Qq)this.HH();else{var a=this.Qa.className;this.Qa=document.createElement("canvas");this.Qa.className=a;this.$G()}this.set("reload");new g.fb.sb(g.w.vc+"://webapi.amap.com/count?"+["type=glfail","c="+g.O.Lg.gd.Qq,"crd="+g.l.LO,"k="+g.w.key,"u="+g.w.ct,"m="+(g.l.Y?1:0),"pf="+g.l.Nx,"dpr="+window.devicePixelRatio,"scale="+(g.l.XI||0),"detect="+g.l.ia].join("&"))},HH:function(){g.l.mf=!1;this.j&& this.j.e.C&&(this.j.e.set("baseRender",g.l.lt?"dv":"d"),this.j.e.C.MP(),this.j.O=null,this.j.X.Jr(),this.j=null);this.Qa=this.L=null},xg:function(a){this.Qa=document.createElement("canvas");this.Qa.className=a||"amap-layer"},$G:function(){if(1<g.O.Lg.gd.Qq)return this.HH(),!1;var a=this.na=this.Qa.getContext(g.l.A5,g.l.B5);if(a)g.F.h(this.Qa,"webglcontextlost",this.RB,this);else return this.HH(),!1;g.Rl.Bla(a,this.o7,this.j6);this.TR=a.getUniformLocation(a.Ba,"u_xDelta");this.m5=a.getUniformLocation(a.Ba, "u_othMatrix");this.p5=a.getUniformLocation(a.Ba,"u_zoomMatrix");this.k5=a.getUniformLocation(a.Ba,"u_modelMatrix");this.Hd=a.getAttribLocation(a.Ba,"a_Position");this.Hi=a.getAttribLocation(a.Ba,"a_op");this.Gi=a.getAttribLocation(a.Ba,"a_Previous");this.pg=a.getAttribLocation(a.Ba,"a_Next");this.pw=a.getAttribLocation(a.Ba,"a_Tags");a.enableVertexAttribArray(this.Hd);this.gj=a.getUniformLocation(a.Ba,"u_FragColor");this.ny=a.getUniformLocation(a.Ba,"u_FragColor2");this.Uj=a.getUniformLocation(a.Ba, "u_type");this.Mu=a.getUniformLocation(a.Ba,"u_width");this.LR=a.getUniformLocation(a.Ba,"u_isDash");this.MR=a.getUniformLocation(a.Ba,"u_onlyBorder");this.JR=a.getUniformLocation(a.Ba,"u_dash");this.QR=a.getUniformLocation(a.Ba,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.bQ=this.uN=this.ox=void 0;this.Ay=0;return!0}, ru:function(a){var b=Math.pow(2,a.Q.zoom-this.Qe),c=a.Q.hb.Ya(this.qr).Wc(this.Oj);this.transform={translate:this.transform[0].translate.add(c),scale:b,rotate:0};this.hb=a.Q.hb},Ux:function(a,b){var c=this.PM(a,b),d=this.na,e=this.L.je;"function"===typeof e&&e(a.Q.zoom);d.clear(d.COLOR_BUFFER_BIT);var e=this.j.ia?this.nb:this.wp,f=0,h=0;0!==a.Q.rotation?(f=2*Math.floor(a.Q.Ja.mc.x)*e,h=2*Math.floor(a.Q.Ja.mc.y)*e):(f=a.size.width*e,h=a.size.height*e);f&&h&&(this.Qa.width=f,this.Qa.height=h,d.viewport(0, 0,this.Qa.width,this.Qa.height),this.Kr.apply(this,c),this.uf(a))},Np:256*Math.pow(2,20),EN:function(a,b){g.Rl.HA([this.gj]);for(var c=0,d=b.length;c<d;c++){var e=b[c],f=(e.Ob?e.Ob.va:e.va).region;if(f&&f.length){this.Jq(e.xm*this.Np);e=f.buffer;a.bindBuffer(a.ARRAY_BUFFER,e.ba);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.Qb);for(var h=0,k=e.oo.length;h<k;h++){var l=e.ue[h],m=l[0];(l=l[1])&&this.e.Ac&&(m=this.L.gr(m,l),f[h].nd=m);m&&(a.vertexAttribPointer(this.Hd,2,a.FLOAT,!1,8,0),a.uniform4f(this.gj,m[0], m[1],m[2],m[3]),a.drawElements(a.TRIANGLES,e.oo[h][0],a.UNSIGNED_SHORT,e.oo[h][1]))}}}},FN:function(a,b){var c=g.Rl,d=this.j.ia?this.nb:this.wp;c.HA([this.gj,this.Uj,this.Mu]);for(var e={},f=0,h=b.length;f<h;f++){var k=b[f];if(k=(k.Ob?k.Ob.va:k.va).road){var k=k.buffer.hash,l;for(l in k)k.hasOwnProperty(l)&&(e[l]?e[l].push(f):e[l]=[f])}}for(var m in e)if(e.hasOwnProperty(m))for(f=e[m],h=0,l=f.length;h<l;h++){for(var k=b[f[h]],n=(k.Ob?k.Ob.va:k.va).road,p=n.buffer,q=p.hash[m],n=n[m],r=!1,s=0,u=n.length;s< u;s++){var v=n[s],x=v,t=q[s],w=x[4],y=x[10];y&&this.e.Ac&&(w=this.L.tl(w,y,0),v.nd=w);v=this.PK(x)[1];if(w&&v){c.tf(a,"1i",this.Uj,"square"===x[9]?3:"round"===x[9]?4:2);this.Jq(k.xm*this.Np);if(0===s||r)a.bindBuffer(a.ARRAY_BUFFER,p.ba[t[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,p.Qb[t[0]]),r&&(r=!1);a.vertexAttribPointer(this.Hd,2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.Hi,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.Gi,3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.pg,3,a.FLOAT,!1,44,32);c.tf(a, "1f",this.Mu,v*d);c.tf(a,"4f",this.gj,w);this.Po(x[5]?1:0,x[5],0);a.drawElements(a.TRIANGLES,t[1],a.UNSIGNED_SHORT,t[2])}else 0===s&&1<n.length&&(r=!0)}r=!1;s=0;for(u=n.length;s<u;s++){var t=x=n[s],w=q[s],v=t[1],y=t[10],z=t.kh.gf[0];y&&this.e.Ac&&(v=this.L.tl(v,y,1),x.nd=v);if(z&&v){c.tf(a,"1i",this.Uj,"square"===t[8]?3:"round"===t[8]?4:2);this.Jq(k.xm*this.Np);if(0===s||r)a.bindBuffer(a.ARRAY_BUFFER,p.ba[w[0]]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,p.Qb[w[0]]),r&&(r=!1);a.vertexAttribPointer(this.Hd, 2,a.FLOAT,!1,44,0);a.vertexAttribPointer(this.Hi,3,a.FLOAT,!1,44,8);a.vertexAttribPointer(this.Gi,3,a.FLOAT,!1,44,20);a.vertexAttribPointer(this.pg,3,a.FLOAT,!1,44,32);c.tf(a,"1f",this.Mu,z*d);c.tf(a,"4f",this.gj,v);this.Po(t[2]?1:0,t[2],t[6]?1:0);a.drawElements(a.TRIANGLES,w[1],a.UNSIGNED_SHORT,w[2])}else 0===s&&1<n.length&&(r=!0)}}},Xb:new g.G(215440491,106744817),Kr:function(a,b,c){if(a.length){this.Uc+=1;b=this.Qa.width;c=this.Qa.height;var d=this.na;b=(new g.Vd).jR(-b/2,b/2,c/2,-c/2,0,1);c=Math.pow(2, this.zoom-this.Ii)*(this.j.ia?this.nb:this.wp);c=(new g.Vd).scale(c,c,1);var e=this.hb.Wc(this.S/Math.pow(2,this.Ii-this.zoom)).Ya(this.Xb),e=(new g.Vd).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.m5,!1,b.elements);d.uniformMatrix4fv(this.p5,!1,c.elements);d.uniformMatrix4fv(this.k5,!1,e.elements);d.uniform1f(this.QR,Math.pow(2,this.zoom-this.Ii)*(this.j.ia?this.nb:1));b=this.$k=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.Hi);d.disableVertexAttribArray(this.Gi);d.disableVertexAttribArray(this.pg); d.disableVertexAttribArray(this.pw);this.Po(0,void 0,void 0);d.uniform1i(this.Uj,0);this.Jq(0);for(var f=0,h=e.length;f<h;f+=1){var k=e[f];if(k.Ob?k.Ob.va:k.va)k.Uc=this.Uc,b.push(k)}this.EN(d,e);d.enableVertexAttribArray(this.Hi);d.enableVertexAttribArray(this.Gi);d.enableVertexAttribArray(this.pg);d.disableVertexAttribArray(this.pw);e.length&&this.FN(d,e);if(!(14>this.zoom))for(d.uniform1i(this.Uj,1),this.Po(0,void 0,void 0),d.disableVertexAttribArray(this.Hi),d.disableVertexAttribArray(this.Gi), d.disableVertexAttribArray(this.pg),d.enableVertexAttribArray(this.pw),f=0,h=e.length;f<h;f+=1)k=e[f],(k.Ob?k.Ob.va:k.va).building&&this.gG(d,k)}}},gG:function(a,b){for(var c=(b.Ob?b.Ob.va:b.va).building,d=0;d<c.length;d+=1){var e=c[d],f=e[3][0],h=e[3][1];if(!e||!f)break;var k=e[3][2];k&&this.e.Ac&&(h=this.L.Xw(f,h,k),f=h[0],h=h[1],e.nd=f);if(f||h)f||(f=[0,0,0,0]),h||(h=[0,0,0,0]),a.uniform4f(this.ny,f[0],f[1],f[2],f[3]),a.uniform4f(this.gj,h[0],h[1],h[2],h[3]),e.LB&&(a.bindBuffer(a.ARRAY_BUFFER, e[0]),a.vertexAttribPointer(this.Hd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pw,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.LB)),e.MB&&(a.bindBuffer(a.ARRAY_BUFFER,e[2]),a.vertexAttribPointer(this.Hd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pw,1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,e.MB)),e.wH&&(a.bindBuffer(a.ARRAY_BUFFER,e[1]),a.vertexAttribPointer(this.Hd,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pw,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.wH))}},Po:function(a,b,c){var d= this.na;a!==this.ox&&(d.uniform1i(this.LR,a),this.ox=a);a&&b!==this.uN&&(this.uN=b,d.uniform4f(this.JR,b[0],b[1],b[2]||0,b[3]||0));c!==this.bQ&&(d.uniform1i(this.MR,c),this.bQ=c)},Jq:function(a){a!==this.Ay&&(this.na.uniform1f(this.TR,a),this.Ay=a)},uf:function(){this.transform={translate:{x:this.Qa.width/2,y:this.Qa.height/2},scale:this.j.ia?1/this.nb:1/this.wp,rotate:0}},BM:function(a,b,c){var d=null;if(a.length&&c)d=a[11].id+"-"+c,this.ok[d]&&(a[0]=this.ok[d][0],a[3]=this.ok[d][3]);else return c= [],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&&0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length?(a[3]=a[0]+parseInt(c[3]),0===g.a.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.ok[d]&&(this.ok[d]=[a[0],0,0,a[3]]),a},PK:function(a){var b=this.zoom;if(a.kh&&a.kh.zoom===b)return a.kh.gf;var c=a[11].browserStyle,d=a[11].levelStyleMapping;if(18<this.zoom){var e=this.jk(a,18,c,d),f=Math.pow(2,this.zoom-18);a.kh={zoom:b,gf:[e[0]*f,e[3]*f]}}else g.a.Z0(this.zoom)? (e=this.jk(a,this.zoom,c,d),a.kh={zoom:b,gf:[e[0],e[3]]}):(e=function(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1-0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return g.a.Yc(d,3)},f=this.jk(a,Math.floor(this.zoom),c,d),d=this.jk(a,Math.ceil(this.zoom),c,d),c=e(f[0],d[0],this.zoom),e=e(f[3],d[3],this.zoom),a.kh={zoom:b,gf:[c,e]});return a.kh.gf},jk:function(a,b,c,d){a=a[11].id+"-"+b;this.ok[a]||(this.ok[a]=this.BM([],c[d[b]]));return this.ok[a]}});g.O.Lg.gd.Qq=0;(function(){if(g.ed&&!g.ed.iP){var a=g.a.jB({Ce:"anole",$s:"addTransferList"});g.ed.iP=function(){var b="\\n      let handlers = {}\\n      let transferList = []\\n      let _handlers = [ ("+g.C5+")(true) ]\\n\\n      for (let i = 0, l = _handlers.length; i < l; i++) {\\n        let _handlerObj = _handlers[i]\\n\\n        for (let methodName in _handlerObj) {\\n          if (_handlerObj.hasOwnProperty(methodName)) {\\n            handlers[methodName] = _handlerObj[methodName]    \\n          }\\n        }\\n      }\\n\\n      handlers.anole = "+ JSON.stringify(g.Ce)+";\\n\\n      handlers."+a.addTransferList+" = function(transferObjects) {\\n        transferList.push.apply(transferList, transferObjects)\\n      };\\n\\n      self.addEventListener(\'message\', function (e) {\\n        let data = e.data\\n\\n        // console.log(data.cmd, new Date().getTime() - data.ts)\\n\\n        if (data.cmd === \'ping\') {\\n          self.postMessage({\\n            ping: true,\\n            status: 200,\\n            ts: data.ts,\\n            _ts: new Date().getTime()\\n          })\\n\\n          return\\n        }\\n\\n        if (typeof handlers[data.cmd] === \'function\') {\\n\\n          data.args.push(function (err, result) {\\n            self.postMessage({\\n              err,\\n              result,\\n              taskId: data.taskId,\\n              parentTaskId: data.parentTaskId,\\n              ts: data.ts,\\n              _ts: new Date().getTime()\\n            }, transferList)\\n\\n            transferList = []\\n          })\\n\\n          if (handlers.anole) {\\n            data.args[0]."+ a.anole+" = handlers.anole\\n          }\\n        \\n          handlers[data.cmd].apply(handlers, data.args)\\n        }\\n      })\\n    ";if(b=g.a.createObjectURL(b))this.url=b,g.ed.Jf(null,{eha:b},function(){g.ed.vla()})}}})(); ')
_jsload_('sync', '(function(){if(g.w.zc){var a=function(){var a=g.w.zc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(g.w.zc+" is not a function!");setTimeout(c,1)}else if(b)throw Error("Can not find callback: "+g.w.zc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+g.w.key,"t="+c];c.push("resolution="+ window.innerWidth+"*"+window.innerHeight);c.push("mob="+(g.l.Y?1:0));c.push("vt="+(g.l.lt?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+g.l.XI||0);c.push("detect="+g.l.ia);c=g.w.Od+"/v3/log/init?"+c.join("&");new g.fb.sb(c,{callback:"callback"})})(); ')