!function(n,i){"use strict";var l="ht",c=l+".graph.",E=n[l],D=E.graph,r=E.Default,G=E.Color,Y=null,X="px",M=r.getInternal(),R=M.getPinchDist,t=r.preventDefault,o=r.getTouchCount,y=r.startDragging;M.addMethod(r,{overviewBackground:G.widgetBackground,overviewMaskBackground:G.transparent,overviewContentBorderColor:G.widgetBorder,overviewContentBackground:G.background},!0),D.Overview=function(A){var d=this,s=d._view=M.createView(1,d);d._canvas=M.createCanvas(s),s.style.background=r.overviewBackground,s.appendChild(d._mask=M.createDiv()),d.setGraphView(A),d.addListeners()},r.def(c+"Overview",i,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:r.overviewMaskBackground,_contentBorderColor:r.overviewContentBorderColor,_contentBackground:r.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(y){var u=this;if(u.gv!==y){var v=u.gv;u.gv=y,v&&(v.removeViewListener(u.handleGraphViewChanged,u),v.ump(u.handleGraphViewPropertyChanged,u)),y&&(y.addViewListener(u.handleGraphViewChanged,u),y.mp(u.handleGraphViewPropertyChanged,u)),u.fp("graphView",v,y),u.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(K){this._autoUpdate&&"validate"===K.kind&&this.redraw()},handleGraphViewPropertyChanged:function(m){("canvasBackground"===m.property||this.getFixToRect()&&("zoom"===m.property||"translateX"===m.property||"translateY"===m.property))&&this.redraw()},redraw:function(){var H=this;H._redraw||(H._redraw=1,H.iv(50))},validateImpl:function(){var c=this,L=c.gv,z=c._canvas,E=c.getWidth(),h=c.getHeight(),f=c._redraw;if(L){var $=c._mask,b=$.style,S=L.getViewRect(),m=this.getFixToRect(),K=m?"boolean"==typeof m?L.getContentRect():m:L.getScrollRect(),V=K.x,F=K.y,w=K.width,U=K.height,R=c._rate=Math.max(w/E,U/h),v=c._x=(E-w/R)/2,H=c._y=(h-U/R)/2;if(0!==S.width&&0!==S.height||c.hasRetry||(r.callLater(c.iv,c,Y),c.hasRetry=!0),(E!==z.clientWidth||h!==z.clientHeight)&&(M.setCanvas(z,E,h),f=1),M.isSameRect(K,c._scrollRect)||(c._scrollRect=K,f=1),f){var i=M.initContext(z),O=L.getDataModel(),s=O.getBackground()||c._contentBackground,o=c._contentBorderColor,J=r.devicePixelRatio;i.clearRect(0,0,E*J,h*J);var D=O.getBackground()&&O.a("width")>0&&O.a("height")>0;s&&!D&&M.fillRect(i,v*J,H*J,w/R*J,U/R*J,s),M.translateAndScale(i,-V/R+v,-F/R+H,1/R),L._42(i),i.restore(),o&&M.drawBorder(i,o,v*J,H*J,w/R*J,U/R*J)}b.background=c._maskBackground,b.left=v+(S.x-V)/R+X,b.top=H+(S.y-F)/R+X,b.width=S.width/R+X,b.height=S.height/R+X,c._redraw=null}else if(f){var i=M.initContext(z);i.clearRect(0,0,E,h),i.restore(),c._redraw=null}},center:function(C){var Z=this,O=Z.gv;if(O){var v=O._zoom,Y=O._29I,s=Z._rate,D=Z._scrollRect,I=r.getLogicalPoint(C,Z._canvas),V=D.x+(I.x-Z._x)*s,n=D.y+(I.y-Z._y)*s;O.setTranslate((Y.width/2-V)*v,(Y.height/2-n)*v)}},handle_mousedown:function(z){this.handle_touchstart(z)},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)},handleWindowMouseMove:function(A){this.handleWindowTouchMove(A)},handle_mousewheel:function(D){this.handleScroll(D,D.wheelDelta)},handle_DOMMouseScroll:function(q){2===q.axis&&this.handleScroll(q,-q.detail)},handleScroll:function(J,Z){if(t(J),this.gv){var u=this.gv;Z>0?u.scrollZoomIn():0>Z&&u.scrollZoomOut()}},handle_touchstart:function(Y){if(t(Y),this.gv&&r.isLeftButton(Y)){var U=this,_=U.gv,c=o(Y);1===c?r.isDoubleClick(Y)&&_.isResettable()?_.reset():(U.center(Y),y(U,Y)):2===c&&(U._dist=R(Y),y(U,Y))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(O){if(this.gv){var n=this,e=n._dist,L=o(O);1===L?n.center(O):2===L&&e!=Y&&n.gv.handlePinch(Y,R(O),e)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);